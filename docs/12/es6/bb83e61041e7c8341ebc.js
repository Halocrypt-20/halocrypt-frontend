(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{12:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>h});var s=r(386),i=r(804),n=r(596),o=r(77),a=r(710);function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const l=i.h.getStore();class h extends s.wA{constructor(...t){super(...t),u(this,"state",{isLoading:!1,token:""}),u(this,"onInput",t=>this.setState({token:t.target.value||""})),u(this,"onSubmit",()=>{const t=(this.state.token||"").trim();t||this.setState({error:"Blank Token"}),this.setState({isLoading:!0}),(0,n.V)(o.EA.checkEmailToken,{token:t}).then(t=>{const e=t.error||t.data.error;return e?this.setState({error:e,isLoading:!1}):(l.userData.has_verified_email=!0,(0,s.uX)("/profile?email-verified"))})})}componentDidMount(){return l.isLoggedIn?l.userData.has_verified_email?(0,s.uX)("/profile"):(this.setState({isLoading:!0}),void(0,n.V)(o.EA.verifyEmail,{user:l.userData.id}).then(t=>{const e=t.error||t.data.error;if(e)return this.setState({error:e});this.setState({isLoading:!1,emailSent:!0})})):this.setState({error:"Log in first"})}render(t,e){return(0,s.az)("div",{children:[e.error&&(0,s.az)(ErrorPopup,{errorHead:"Failed",reasons:Array.isArray(e.error)?e.error:[e.error],close:this._resetError}),(0,s.az)("div",{class:"heading-text bfont mtx-fp",children:"Verify Email"}),(0,s.az)("form",{action:"javascript:",onSubmit:this.onSubmit,children:[e.emailSent?"Check your email for the token":"Still mailing you..",e.emailSent&&(0,s.az)("div",{class:"input-parent",children:[(0,s.az)(a.H,{onInput:this.onInput,labelText:"Token"}),(0,s.az)("button",{class:"action-button hoverable heading-text",children:"Submit"})]})]}),e.isLoading&&"Just a sec"]})}}},710:(t,e,r)=>{"use strict";r.d(e,{H:()=>n});var s=r(386);function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class n extends s.wA{constructor(...t){super(...t),i(this,"state",{id:Math.random(),isFocused:!1,value:this.props.value||""}),i(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0,moveDown:!1})),i(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1,moveDown:!0})),i(this,"onInput",t=>this.setState({value:t.target.value})),i(this,"__onInput",t=>{const e=this.props.onInput;this.onInput(t),null!=e&&e(t)})}render({idx:t,labelText:e="",type:r="text",inputClass:i,extraProps:n},{isFocused:a,moveDown:u}){const l=t||this.state.id,h=this.state.value,c=["_animate",a||h?"moveup":"",u?"movedown":""];return(0,s.h)("div",{class:"user-input-anim "+(i||"")},(0,s.h)("label",{class:c,for:l},e),(0,s.h)(o,{onFocus:this.onFocus,onBlur:this.onBlur,type:r,value:h,extraProps:n,id:l,onInput:this.__onInput}))}}function o({onFocus:t,onBlur:e,onInput:r,id:i,type:n,value:o,extraProps:a}){return(0,s.h)("input",{onFocus:t,onBlur:e,onInput:r,id:i,value:o,type:n,...a,class:"paper-input"})}}}]);