(window.webpackJsonp=window.webpackJsonp||[]).push([[747],{7:(e,t,s)=>{"use strict";s.d(t,{u:()=>c,k:()=>d});var r=s(77),n=s(596),a=s(804),o=s(369);const i=(0,o.Z)({},window.__initConfig);window.__initConfig=null;const l=a.h.getStore(),c=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||setTimeout;const d=new class{constructor(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile",this.passwordResetRequested="password-reset"}__shouldPostLog(){return!r.mH}_admin_getLogs(){if(l.isLoggedIn&&l.userData.is_admin)return(0,n.A)(r.PW.getLogs)}sendUserLog(e){const t="string"==typeof e?{type:e}:e,s=(0,o.Z)({},t,i);this.__shouldPostLog()?c(()=>(0,n.V)(r.PW.addLog,s)):console.log("prod log post ->",s)}};window.onerror=(e,t,s,r,n)=>{const a=n||{};e=e||a.message||"";const o=n.line||a.message||0,i=n.column||0,l=a.script||"",c=a.stackTrace||a.stack||"",u=Date.now(),h=location.href;d.sendUserLog({type:"js-error",timestamp:u,message:e,line:o,column:i,script:l,stack:c,url:h,source:t})}},747:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(386),n=s(710),a=s(67),o=s(118),i=s(662),l=s(804),c=s(7);function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={valid:!0},h=l.h.getStore();function p(e){return e?u:{error:"Value required"}}const g="Username should be between 3 and 30 characters",m="Username and name can not contain special characters",f="Name should be less than 30 characters and cannot be blank",_="Password should be longer than 5 characters",w="Passwords do not match";class v extends i.Z{constructor(...e){var t;super(...e),t=this,d(this,"state",{user:"",email:"",name:"",password:"",conf_pass:"",school:"",ig_user_id:"",currentInputIndex:0}),d(this,"fieldsOrder",["name","user","email","school","ig_user_id","password","conf_pass"]),d(this,"labelTexts",{school:"School (Optional)",ig_user_id:"Instagram (Optional)",conf_pass:"Confirm password",user:"Username"}),d(this,"resetError",()=>this.setState({hasError:!1,error:null})),d(this,"_validate_email",p),d(this,"_validate_school",p),d(this,"_validate_ig_user_id",()=>u),d(this,"onSubmit",(async function(e){if(t.state.loading)return;e.preventDefault();const s=t.state.currentInputIndex,n=t.fieldsOrder[s],a=t["_validate_"+n](t.state[n]);if(a.valid){if(s!==t.fieldsOrder.length-1)return t.setState({currentInputIndex:s+1,hasError:!1,error:null});const{user:e,email:n,name:a,password:i,school:l,ig_user_id:d}=t.state;t.setState({loading:!0});const u=await o.y.createAccount({user:e,email:n,name:a,password:i,school:l,ig_user_id:d});if(u.error)return t.setState({hasError:!0,error:u.error,loading:!1});if(u.id)return c.k.sendUserLog(c.k.registerActionComplete),(0,r.uX)("/login")}else t.setState({hasError:!0,error:a.error})})),d(this,"_decrementState",()=>{this.setState(e=>({currentInputIndex:e.currentInputIndex-1}))})}componentDidMount(){super.componentDidMount(),c.k.sendUserLog(c.k.pageViewRegistered)}componentDidUpdate(){if(h.isLoggedIn)return(0,r.uX)("/profile");const e=document.getElementById("input___"+this.state.currentInputIndex);e&&e.focus()}_validate_password(e){return e.length<5?{error:_}:u}_validate_user(e){const t=e.length;return t<3||t>30?{error:g}:e!==e.replace(a.Pt,"")?{error:m}:u}_validate_name(e){const t=e.length;return!t||t>30?{error:f}:u}_validate_conf_pass(e){return e!==this.state.password?{error:w}:u}onInput(e){return t=>{let s=t.target.value;"password"!==t&&"conf_pass"!==t&&(s=(s||"").trim()),this.setState({[e]:s||""})}}render(e,t){const s=t.currentInputIndex===this.fieldsOrder.length-1;return(0,r.az)("div",{class:"form-doc",children:[(0,r.az)("div",{class:"form-title heading-text",children:"Register"}),(0,r.az)("div",{class:"form-ext-text heading-text clr",children:"Let's Get You Started"}),t.hasError&&(0,r.az)(z,{close:this.resetError,reason:t.error}),(0,r.az)("div",{class:"form-stx",children:[(0,r.az)("form",{action:"javascript:",onsubmit:this.onSubmit,children:[(0,r.az)(x,{instance:this}),(0,r.az)(b,{state:t,decrement:this._decrementState,isLastInput:s}),t.loading&&(0,r.az)("div",{children:"Hang on, getting you signed up"})]}),(0,r.az)("div",{class:"inst",children:[(0,r.az)(r.A,{href:"/login",class:"heading-text clr ",children:"Want to Login Instead?"}),(0,r.az)("br",{}),(0,r.az)(r.A,{href:"https://discord.gg/fz8e6Df",class:"heading-text clr hoverable",children:"Join Discord"}),(0,r.az)("br",{}),(0,r.az)(r.A,{href:"https://twitter.com/halocrypt1",class:"heading-text clr hoverable",children:"Join Twitter"})]})]})]})}}function b(e){const{state:t,decrement:s,isLastInput:n}=e;return(0,r.az)("div",{class:"form-action-controls",children:[0!==t.currentInputIndex&&(0,r.az)("span",{class:"form-act back",onClick:s,"aria-label":"previous step"}),n?(0,r.az)("button",{"aria-label":"Register",style:{marginLeft:"auto"},class:"heading-text submit-button",children:"Register"}):(0,r.az)("button",{class:"form-act fwd","aria-label":"next step"})]})}const I={email:"email",password:"password",conf_pass:"password"};function x(e){const t=e.instance;return t.fieldsOrder.map((e,s)=>s===t.state.currentInputIndex&&(0,r.az)(n.H,{id:"input___"+s,inputClass:"form-anim",value:t.state[e],type:I[e]||"text",labelText:t.labelTexts[e]||e,onInput:t.onInput(e)}))}function z(e){return(0,r.az)(r.HY,{children:[(0,r.az)("div",{class:"mask"}),(0,r.az)(a.OK,{errorHead:"Can't register",close:e.close,reasons:[e.reason]})]})}},662:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(386),n=s(804);class a extends r.wA{constructor(...e){var t,s,r;super(...e),r=()=>this.setState({hasNewData:!0}),(s="_globalStoreStateChanged")in(t=this)?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r}componentDidMount(){n.h.subscribe(this._globalStoreStateChanged)}componentWillUnmount(){n.h.unsubscribe(this._globalStoreStateChanged)}}},710:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});var r=s(386);function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class a extends r.wA{constructor(...e){super(...e),n(this,"state",{id:Math.random(),isFocused:!1,value:this.props.value||""}),n(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0,moveDown:!1})),n(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1,moveDown:!0})),n(this,"onInput",e=>this.setState({value:e.target.value})),n(this,"__onInput",e=>{const t=this.props.onInput;this.onInput(e),null!=t&&t(e)})}render({idx:e,labelText:t="",type:s="text",inputClass:n,extraProps:a},{isFocused:i,moveDown:l}){const c=e||this.state.id,d=this.state.value,u=["_animate",i||d?"moveup":"",l?"movedown":""];return(0,r.h)("div",{class:"user-input-anim "+(n||"")},(0,r.h)("label",{class:u,for:c},t),(0,r.h)(o,{onFocus:this.onFocus,onBlur:this.onBlur,type:s,value:d,extraProps:a,id:c,onInput:this.__onInput}))}}function o({onFocus:e,onBlur:t,onInput:s,id:n,type:a,value:o,extraProps:i}){return(0,r.h)("input",{onFocus:e,onBlur:t,onInput:s,id:n,value:o,type:a,...i,class:"paper-input"})}},67:(e,t,s)=>{"use strict";s.d(t,{OK:()=>n,Pt:()=>a});var r=s(386);function n(e){return(0,r.az)(o,{...Object.assign({},e,{title:"Something Ain't Right"})})}const a=/([^\w]|_)/g;function o(e){return(0,r.az)("div",{class:"app-popup",children:[(0,r.az)("div",{class:"heading-text clr app-popup-title",children:"props.title"}),(0,r.az)("div",{children:e.errorHead}),(0,r.az)("div",{class:"err-reasons",children:(0,r.az)("div",{children:e.reasons.map(e=>(0,r.az)("div",{children:[" - ",e]}))})}),(0,r.az)("button",{class:"app-popup-close",onClick:e.close,children:"OK"})]})}}}]);