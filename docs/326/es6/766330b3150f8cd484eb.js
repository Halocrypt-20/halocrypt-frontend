(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{7:(e,t,i)=>{"use strict";i.d(t,{u:()=>d,k:()=>c});var s=i(77),r=i(649),a=i(804),n=i(369);const o=(0,n.Z)({},window.__initConfig);window.__initConfig=null;const l=a.h.getStore(),d=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||setTimeout;const c=new class{constructor(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile",this.passwordResetRequested="password-reset"}__shouldPostLog(){return!1}_admin_getLogs(){if(l.isLoggedIn&&l.userData.is_admin)return(0,r.A)(s.PW.getLogs)}sendUserLog(e){const t="string"==typeof e?{type:e}:e,i=(0,n.Z)({},t,o);this.__shouldPostLog()?d(()=>(0,r.V)(s.PW.addLog,i)):console.log("prod log post ->",i)}};window.onerror=(e,t,i,s,r)=>{const a=r||{};e=e||a.message||"";const n=r.line||a.message||0,o=r.column||0,l=a.script||"",d=a.stackTrace||a.stack||"",u=Date.now(),h=location.href;c.sendUserLog({type:"js-error",timestamp:u,message:e,line:n,column:o,script:l,stack:d,url:h,source:t})}},326:(e,t,i)=>{"use strict";i.r(t);var s=i(386);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a={id:"Username",current_level:"Level",ig_user_id:"Insta",is_admin:"Player Type"};class n extends s.ZP{constructor(...e){super(...e),r(this,"__sendSuccess",()=>(this.state.value||"").trim()&&this.props.onUpdate(this.state.value)),r(this,"state",{value:this.props.value||""}),r(this,"onInput",e=>this.setState({value:e.target.value}))}render(e,t){const i=e.detailName,r=a[i]||i;return(0,s.az)(s.HY,{children:[(0,s.az)("div",{class:"mask"}),(0,s.az)("div",{class:"app-popup profile-info-updater",children:[(0,s.az)("div",{class:"heading-text clr",style:{marginTop:"5px",marginBottom:"10px"},children:["Edit ",r]}),e.progress&&(0,s.az)("div",{children:e.progress}),(0,s.az)("form",{action:"javascript:",onSubmit:this.__sendSuccess,children:[(0,s.az)("input",{type:"email"===i?i:"text",value:t.value,class:"paper-input",style:{width:"80%"},onInput:this.onInput,placeholder:r}),(0,s.az)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,s.az)("span",{class:"action-button hoverable update-action",onClick:this.__sendSuccess,children:"Update"}),(0,s.az)("span",{onClick:e.close,class:"action-button hoverable update-action",children:"Cancel"})]})]})]})]})}}var o=i(804),l=i(77),d=i(649),c=i(67),u=i(659),h=i(7),p=i(264);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Profile:()=>v,default:()=>D});const f=o.h.getStore(),_={},m="heading-text hoverable landing-action-button";class v extends s.wA{constructor(...e){super(...e),g(this,"state",{isEditing:!1,fieldEdited:null,__receivedData:this.props.data}),g(this,"headerText","Profile"),g(this,"helpText","You can edit your email, instagram and school fields by clicking them"),g(this,"editableFieldsValidatorFunctions",{ig_user_id:p.oS,email:p.sQ,school:p.oS}),g(this,"requestEditUserDetail",e=>{!this.state.isEditing&&this._isAllowedToEditProfile()&&this.setState({isEditing:!0,fieldEdited:e})}),g(this,"syncProfileInfoWithServer",e=>{if(this.state.workProgress)return;const t=this.state.fieldEdited,i=this.editableFieldsValidatorFunctions[t](e);i.valid?(this.setState({workProgress:"Syncing new data with the server..."}),(0,d.V)(l.EA.edit,{user:this.state.__receivedData.id,field:t,new_value:(e||"").trim()}).then(this.__onResponse)):this.setState({error:i.error,workProgress:null})}),g(this,"__onResponse",e=>{if(!f.isLoggedIn)return;const t=e.error||e.data.error;if(t)return this.setState({error:t,workProgress:null});const i=e.data.user_data;this.setState({workProgress:null,isEditing:null,fieldEdited:null,__receivedData:i}),i.id===f.userData.id&&o.h.set("userData",i)}),g(this,"_getRequestEditUserDetail",e=>()=>this.requestEditUserDetail(e)),g(this,"closePrompt",()=>this.setState({isEditing:!1,fieldEdited:null})),g(this,"resetError",()=>this.setState({error:null}))}_getKeys(e){return["name","id","current_level","is_admin","school"].concat((0,u.Z)(e&&e.secure_data||_))}_getActionPanel(){const e=this.state.__receivedData,t=f.isLoggedIn&&f.userData.id;return(0,s.az)("div",{class:"action-buttons-profile",children:(0,s.az)(w,{data:e,currID:t})})}_isAllowedToEditProfile(){const e=f.userData?f.userData.id:null;return this.state.__receivedData.id===e}render(e,t){const i=t.__receivedData,r=i.secure_data||_;return(0,s.az)("div",{children:[t.isEditing&&(0,s.az)(s.HY,{children:[t.error&&(0,s.az)(c.OK,{errorHead:"Can't edit",close:this.resetError,reason:t.error}),(0,s.az)(n,{progress:this.state.workProgress,close:this.closePrompt,detailName:t.fieldEdited,onUpdate:this.syncProfileInfoWithServer,value:t.__receivedData[t.fieldEdited]||t.__receivedData.secure_data[t.fieldEdited]})]}),(0,s.az)("div",{class:"heading-text bfont",children:this.headerText}),(0,s.az)("div",{style:{fontSize:"0.96rem"},children:this._isAllowedToEditProfile()&&this.helpText}),(0,s.az)("div",{class:"prof-data-box",children:this._getKeys(i).map(e=>(0,s.az)(b,{editableFieldsValidatorFunctions:this.editableFieldsValidatorFunctions,x:e,getRequestEditUserDetail:this._getRequestEditUserDetail,data:i,sec:r}))}),this._getActionPanel()]})}}function w(e){const t=e.data,i=e.currID;return(0,s.az)(s.HY,{children:[y(t,i)&&(0,s.az)(s.A,{href:"/__admin__",class:m,children:"Admin Panel"}),t.id===i&&[!t.has_verified_email&&(0,s.az)(s.A,{href:"/verify-email",class:m,children:"Verify Email"}),(0,s.az)(s.A,{href:"/logout",class:m,children:"Logout"})]]})}function b(e){const{x:t,getRequestEditUserDetail:i,data:r,sec:n,editableFieldsValidatorFunctions:o}=e;return(0,s.az)("div",{onClick:t in o?i(t):null,class:"prof-container"+(t in o?" hoverable":""),children:[(0,s.az)("div",{class:"heading-text prof-field",children:a[t]||t}),(0,s.az)("div",{class:"prof-field",children:P(r,n,t)})]})}async function z(){const e=new URLSearchParams(s.F0.getQs).get("id");let t;return f.isLoggedIn&&e===f.userData.id?t=f.userData:(t=await(0,d.A)(`${l.EA.getUserDetails}?id=${e}`),t=t.data,h.k.sendUserLog({type:h.k.profileView,userViewed:t.id})),t?()=>(0,s.az)(v,{data:t}):()=>(0,s.az)(c.OK,{errorHead:"Profile Error",reasons:["User does not exist"],close:()=>(0,s.uX)("/")})}function P(e,t,i){let s=i in e?e[i]:t[i];return"is_admin"===i&&(s=!0===s?"Team Halocrypt":"Player"),null!=s&&""!==s||(s="N/A"),s}function y(e,t){return e.is_admin&&e.id===t}const E={id:"Loading..",current_level:"Infinity",has_verified_email:null,name:"??"},D=()=>new URLSearchParams(s.F0.getQs).get("id")?(0,s.az)(s.gr,{componentPromise:z,fallbackComponent:()=>(0,s.az)(v,{data:E})}):f.isLoggedIn?(0,s.uX)("/profile?id="+f.userData.id):(0,s.uX)("/login")},67:(e,t,i)=>{"use strict";i.d(t,{OK:()=>r,Pt:()=>a,GI:()=>n});var s=i(386);function r(e){return(0,s.az)(n,{...Object.assign({},e,{title:"Something Ain't Right"})})}const a=/([^\w]|_)/g;function n(e){return(0,s.az)("div",{class:"app-popup",children:[(0,s.az)("div",{class:"heading-text clr app-popup-title",children:e.title}),(0,s.az)("div",{children:e.errorHead}),(0,s.az)("div",{class:"err-reasons",children:(0,s.az)("div",{children:(e.reasons||[]).map(e=>(0,s.az)("div",{children:[" - ",e]}))})}),(0,s.az)("button",{class:"app-popup-close",onClick:e.close,children:"OK"})]})}},264:(e,t,i)=>{"use strict";i.d(t,{Vy:()=>r,sQ:()=>n,oS:()=>o,If:()=>l,Bj:()=>d,RX:()=>c,u2:()=>u,R0:()=>h});var s=i(67);const r={valid:!0},a={valid:!1};function n(e){return e?r:{error:"Value required"}}const o=()=>r;function l(e){return(t=+(t=e))==t?r:a;var t}function d(e){return e.length<5?{error:h.pwLength}:r}function c(e){const t=e.length;return t<3||t>30?{error:h.userLength}:e!==e.replace(s.Pt,"")?{error:h.invalidCharacters}:r}function u(e){const t=e.length;return!t||t>30?{error:h.nameLength}:r}const h={userLength:"Username should be between 3 and 30 characters",invalidCharacters:"Username and name can not contain special characters",invalidEmail:"Invalid email",nameLength:"Name should be less than 30 characters and cannot be blank",pwLength:"Password should be longer than 5 characters",pwNomatch:"Passwords do not match"}}}]);