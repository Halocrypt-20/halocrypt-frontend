(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{1128:function(e,t,r){e.exports=r(7784)},6007:function(e,t,r){"use strict";r.d(t,{u:function(){return m},k:function(){return w}});r(1539),r(8674);var n,i=r(1128),a=r.n(i),s=r(3032),o=r.n(s),l=r(875),u=r.n(l),c=r(4103),d=r.n(c),f=r(77),h=r(3735),p=r(4383),g=r(9369),v=(0,g.Z)({},window.__initConfig);window.__initConfig=null;var _=p.h.getStore(),m=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&d()(n=u().prototype.then).call(n,u().resolve())||o(),w=new(function(){function e(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile",this.passwordResetRequested="password-reset"}var t=e.prototype;return t.__shouldPostLog=function(){return!1},t._admin_getLogs=function(){if(_.isLoggedIn&&_.userData.is_admin)return(0,h.A)(f.PW.getLogs)},t.sendUserLog=function(e){var t="string"==typeof e?{type:e}:e,r=(0,g.Z)({},t,v);this.__shouldPostLog()?m((function(){return(0,h.V)(f.PW.addLog,r)})):console.log("prod log post ->",r)},e}());window.onerror=function(e,t,r,n,i){var s=i||{};e=e||s.message||"";var o=i.line||s.message||0,l=i.column||0,u=s.script||"",c=s.stackTrace||s.stack||"",d=a()(),f=location.href;w.sendUserLog({type:"js-error",timestamp:d,message:e,line:o,column:l,script:u,stack:c,url:f,source:t})}},1326:function(e,t,r){"use strict";r.r(t);var n=r(3109),i=r.n(n),a=(r(5666),r(4435)),s=r.n(a),o=r(1161),l=r.n(o),u=r(2991),c=r.n(u),d=r(5843),f=r.n(d),h=r(7766),p=r.n(h),g=r(1222),v=r.n(g),_=r(4382),m=r.n(_),w=r(7672),E=r.n(w),y=r(2386),z={id:"Username",current_level:"Level",ig_user_id:"Insta",is_admin:"Player Type"},b=function(e){function t(){for(var t,r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=e.call.apply(e,p()(t=[this]).call(t,i))||this,E()(v()(r),"__sendSuccess",(function(){var e;return f()(e=r.state.value||"").call(e)&&r.props.onUpdate(r.state.value)})),E()(v()(r),"state",{value:r.props.value||""}),E()(v()(r),"onInput",(function(e){return r.setState({value:e.target.value})})),r}return m()(t,e),t.prototype.render=function(e,t){var r=e.detailName,n=z[r]||r;return(0,y.az)(y.HY,{children:[(0,y.az)("div",{class:"mask"}),(0,y.az)("div",{class:"app-popup profile-info-updater",children:[(0,y.az)("div",{class:"heading-text clr",style:{marginTop:"5px",marginBottom:"10px"},children:["Edit ",n]}),e.progress&&(0,y.az)("div",{children:e.progress}),(0,y.az)("form",{action:"javascript:",onSubmit:this.__sendSuccess,children:[(0,y.az)("input",{type:"email"===r?r:"text",value:t.value,class:"paper-input",style:{width:"80%"},onInput:this.onInput,placeholder:n}),(0,y.az)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,y.az)("span",{class:"action-button hoverable update-action",onClick:this.__sendSuccess,children:"Update"}),(0,y.az)("span",{onClick:e.close,class:"action-button hoverable update-action",children:"Cancel"})]})]})]})]})},t}(y.ZP),P=r(4383),S=r(77),x=r(3735),D=r(9067),k=r(3659),A=r(6007),L=r(9264);r.d(t,{Profile:function(){return V},default:function(){return N}});var I=P.h.getStore(),U={},C="heading-text hoverable landing-action-button",V=function(e){function t(){for(var t,r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=e.call.apply(e,p()(t=[this]).call(t,i))||this,E()(v()(r),"state",{isEditing:!1,fieldEdited:null,__receivedData:r.props.data}),E()(v()(r),"headerText","Profile"),E()(v()(r),"helpText","You can edit your email, instagram and school fields by clicking them"),E()(v()(r),"editableFieldsValidatorFunctions",{ig_user_id:L.oS,email:L.sQ,school:L.oS}),E()(v()(r),"requestEditUserDetail",(function(e){!r.state.isEditing&&r._isAllowedToEditProfile()&&r.setState({isEditing:!0,fieldEdited:e})})),E()(v()(r),"syncProfileInfoWithServer",(function(e){if(!r.state.workProgress){var t,n=r.state.fieldEdited,i=r.editableFieldsValidatorFunctions[n](e);if(i.valid)r.setState({workProgress:"Syncing new data with the server..."}),(0,x.V)(S.EA.edit,{user:r.state.__receivedData.id,field:n,new_value:f()(t=e||"").call(t)}).then(r.__onResponse);else r.setState({error:i.error,workProgress:null})}})),E()(v()(r),"__onResponse",(function(e){if(I.isLoggedIn){var t=e.error||e.data.error;if(t)return r.setState({error:t,workProgress:null});var n=e.data.user_data;r.setState({workProgress:null,isEditing:null,fieldEdited:null,__receivedData:n}),n.id===I.userData.id&&P.h.set("userData",n)}})),E()(v()(r),"_getRequestEditUserDetail",(function(e){return function(){return r.requestEditUserDetail(e)}})),E()(v()(r),"closePrompt",(function(){return r.setState({isEditing:!1,fieldEdited:null})})),E()(v()(r),"resetError",(function(){return r.setState({error:null})})),r}m()(t,e);var r=t.prototype;return r._getKeys=function(e){var t;return p()(t=["name","id","current_level","is_admin","school"]).call(t,(0,k.Z)(e&&e.secure_data||U))},r._getActionPanel=function(){var e=this.state.__receivedData,t=I.isLoggedIn&&I.userData.id;return(0,y.az)("div",{class:"action-buttons-profile",children:(0,y.az)(R,{data:e,currID:t})})},r._isAllowedToEditProfile=function(){var e=I.userData?I.userData.id:null;return this.state.__receivedData.id===e},r.render=function(e,t){var r,n=this,i=t.__receivedData,a=i.secure_data||U;return(0,y.az)("div",{children:[t.isEditing&&(0,y.az)(y.HY,{children:[t.error&&(0,y.az)(D.OK,{errorHead:"Can't edit",close:this.resetError,reason:t.error}),(0,y.az)(b,{progress:this.state.workProgress,close:this.closePrompt,detailName:t.fieldEdited,onUpdate:this.syncProfileInfoWithServer,value:t.__receivedData[t.fieldEdited]||t.__receivedData.secure_data[t.fieldEdited]})]}),(0,y.az)("div",{class:"heading-text bfont",children:this.headerText}),(0,y.az)("div",{style:{fontSize:"0.96rem"},children:this._isAllowedToEditProfile()&&this.helpText}),(0,y.az)("div",{class:"prof-data-box",children:c()(r=this._getKeys(i)).call(r,(function(e){return(0,y.az)(T,{editableFieldsValidatorFunctions:n.editableFieldsValidatorFunctions,x:e,getRequestEditUserDetail:n._getRequestEditUserDetail,data:i,sec:a})}))}),this._getActionPanel()]})},t}(y.wA);function R(e){var t=e.data,r=e.currID;return(0,y.az)(y.HY,{children:[H(t,r)&&(0,y.az)(y.A,{href:"/__admin__",class:C,children:"Admin Panel"}),t.id===r&&[!t.has_verified_email&&(0,y.az)(y.A,{href:"/verify-email",class:C,children:"Verify Email"}),(0,y.az)(y.A,{href:"/logout",class:C,children:"Logout"})]]})}function T(e){var t=e.x,r=e.getRequestEditUserDetail,n=e.data,i=e.sec,a=e.editableFieldsValidatorFunctions;return(0,y.az)("div",{onClick:t in a?r(t):null,class:"prof-container"+(t in a?" hoverable":""),children:[(0,y.az)("div",{class:"heading-text prof-field",children:z[t]||t}),(0,y.az)("div",{class:"prof-field",children:$(n,i,t)})]})}function F(){return q.apply(this,arguments)}function q(){return(q=l()(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new(s())(y.F0.getQs),r=t.get("id"),!I.isLoggedIn||r!==I.userData.id){e.next=6;break}n=I.userData,e.next=11;break;case 6:return e.next=8,(0,x.A)(S.EA.getUserDetails+"?id="+r);case 8:n=(n=e.sent).data,A.k.sendUserLog({type:A.k.profileView,userViewed:n.id});case 11:if(!n){e.next=13;break}return e.abrupt("return",(function(){return(0,y.az)(V,{data:n})}));case 13:return e.abrupt("return",(function(){return(0,y.az)(D.OK,{errorHead:"Profile Error",reasons:["User does not exist"],close:function(){return(0,y.uX)("/")}})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,r){var n=r in e?e[r]:t[r];return"is_admin"===r&&(n=!0===n?"Team Halocrypt":"Player"),null!=n&&""!==n||(n="N/A"),n}function H(e,t){return e.is_admin&&e.id===t}var K={id:"Loading..",current_level:"Infinity",has_verified_email:null,name:"??"},N=function(){return new(s())(y.F0.getQs).get("id")?(0,y.az)(y.gr,{componentPromise:F,fallbackComponent:function(){return(0,y.az)(V,{data:K})}}):I.isLoggedIn?(0,y.uX)("/profile?id="+I.userData.id):(0,y.uX)("/login")}},9067:function(e,t,r){"use strict";r.d(t,{OK:function(){return l},Pt:function(){return u},GI:function(){return c}});var n=r(2991),i=r.n(n),a=r(1942),s=r.n(a),o=r(2386);function l(e){return(0,o.az)(c,s()(s()({},e),{},{title:"Something Ain't Right"}))}var u=/([^\w]|_)/g;function c(e){var t;return(0,o.az)("div",{class:"app-popup",children:[(0,o.az)("div",{class:"heading-text clr app-popup-title",children:e.title}),(0,o.az)("div",{children:e.errorHead}),(0,o.az)("div",{class:"err-reasons",children:(0,o.az)("div",{children:i()(t=e.reasons||[]).call(t,(function(e){return(0,o.az)("div",{children:[" - ",e]})}))})}),(0,o.az)("button",{class:"app-popup-close",onClick:e.close,children:"OK"})]})}},9264:function(e,t,r){"use strict";r.d(t,{Vy:function(){return i},sQ:function(){return s},oS:function(){return o},If:function(){return l},Bj:function(){return u},RX:function(){return c},u2:function(){return d},R0:function(){return f}});r(4916),r(5306);var n=r(9067),i={valid:!0},a={valid:!1};function s(e){return e?i:{error:"Value required"}}var o=function(){return i};function l(e){return(t=+(t=e))==t?i:a;var t}function u(e){return e.length<5?{error:f.pwLength}:i}function c(e){var t=e.length;return t<3||t>30?{error:f.userLength}:e!==e.replace(n.Pt,"")?{error:f.invalidCharacters}:i}function d(e){var t=e.length;return!t||t>30?{error:f.nameLength}:i}var f={userLength:"Username should be between 3 and 30 characters",invalidCharacters:"Username and name can not contain special characters",invalidEmail:"Invalid email",nameLength:"Name should be less than 30 characters and cannot be blank",pwLength:"Password should be longer than 5 characters",pwNomatch:"Passwords do not match"}},1103:function(e,t,r){r(5160);var n=r(4058);e.exports=n.Date.now},5160:function(e,t,r){r(6887)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},7784:function(e,t,r){var n=r(1103);e.exports=n},5306:function(e,t,r){"use strict";var n=r(7007),i=r(9670),a=r(7908),s=r(7466),o=r(9958),l=r(4488),u=r(1530),c=r(7651),d=Math.max,f=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(e,t,r,n){var v=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=n.REPLACE_KEEPS_$0,m=v?"$":"$0";return[function(r,n){var i=l(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,i,n):t.call(String(i),r,n)},function(e,n){if(!v&&_||"string"==typeof n&&-1===n.indexOf(m)){var a=r(t,e,this,n);if(a.done)return a.value}var l=i(e),h=String(this),p="function"==typeof n;p||(n=String(n));var g=l.global;if(g){var E=l.unicode;l.lastIndex=0}for(var y=[];;){var z=c(l,h);if(null===z)break;if(y.push(z),!g)break;""===String(z[0])&&(l.lastIndex=u(h,s(l.lastIndex),E))}for(var b,P="",S=0,x=0;x<y.length;x++){z=y[x];for(var D=String(z[0]),k=d(f(o(z.index),h.length),0),A=[],L=1;L<z.length;L++)A.push(void 0===(b=z[L])?b:String(b));var I=z.groups;if(p){var U=[D].concat(A,k,h);void 0!==I&&U.push(I);var C=String(n.apply(void 0,U))}else C=w(D,h,k,A,I,n);k>=S&&(P+=h.slice(S,k)+C,S=k+D.length)}return P+h.slice(S)}];function w(e,r,n,i,s,o){var l=n+e.length,u=i.length,c=g;return void 0!==s&&(s=a(s),c=p),t.call(o,c,(function(t,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(l);case"<":o=s[a.slice(1,-1)];break;default:var c=+a;if(0===c)return t;if(c>u){var d=h(c/10);return 0===d?t:d<=u?void 0===i[d-1]?a.charAt(1):i[d-1]+a.charAt(1):t}o=i[c-1]}return void 0===o?"":o}))}}))}}]);