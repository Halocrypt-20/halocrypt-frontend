(window.webpackJsonp=window.webpackJsonp||[]).push([[326],{1128:function(e,t,r){e.exports=r(7784)},6007:function(e,t,r){"use strict";r.d(t,{u:function(){return w},k:function(){return _}});r(1539),r(8674);var n,i=r(1128),a=r.n(i),s=r(3032),o=r.n(s),l=r(875),c=r.n(l),u=r(4103),d=r.n(u),f=r(77),h=r(3735),p=r(4383),g=r(9369),v=(0,g.Z)({},window.__initConfig);window.__initConfig=null;var m=p.h.getStore(),w=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&d()(n=c().prototype.then).call(n,c().resolve())||o(),_=new(function(){function e(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile",this.passwordResetRequested="password-reset"}var t=e.prototype;return t.__shouldPostLog=function(){return!1},t._admin_getLogs=function(){if(m.isLoggedIn&&m.userData.is_admin)return(0,h.A)(f.PW.getLogs)},t.sendUserLog=function(e){var t="string"==typeof e?{type:e}:e,r=(0,g.Z)({},t,v);this.__shouldPostLog()?w((function(){return(0,h.V)(f.PW.addLog,r)})):console.log("prod log post ->",r)},e}());window.onerror=function(e,t,r,n,i){var s=i||{};e=e||s.message||"";var o=i.line||s.message||0,l=i.column||0,c=s.script||"",u=s.stackTrace||s.stack||"",d=a()(),f=location.href;_.sendUserLog({type:"js-error",timestamp:d,message:e,line:o,column:l,script:c,stack:u,url:f,source:t})}},1326:function(e,t,r){"use strict";r.r(t);var n=r(3109),i=r.n(n),a=(r(5666),r(4435)),s=r.n(a),o=r(1161),l=r.n(o),c=r(7766),u=r.n(c),d=r(2991),f=r.n(d),h=r(5843),p=r.n(h),g=r(1222),v=r.n(g),m=r(4382),w=r.n(m),_=r(7672),z=r.n(_),y=r(2386),E={id:"Username",current_level:"Level",ig_user_id:"Insta",is_admin:"Player Type"},b=function(e){function t(){for(var t,r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=e.call.apply(e,u()(t=[this]).call(t,i))||this,z()(v()(r),"__sendSuccess",(function(){var e;return p()(e=r.state.value||"").call(e)&&r.props.onUpdate(r.state.value)})),z()(v()(r),"state",{value:""}),z()(v()(r),"onInput",(function(e){return r.setState({value:e.target.value})})),r}return w()(t,e),t.prototype.render=function(e,t){var r=e.detailName,n=E[r]||r;return(0,y.az)(y.HY,{children:[(0,y.az)("div",{class:"mask"}),(0,y.az)("div",{class:"app-popup profile-info-updater",children:[(0,y.az)("div",{class:"heading-text clr",style:{marginTop:"5px",marginBottom:"10px"},children:["Edit ",n]}),e.progress&&(0,y.az)("div",{children:e.progress}),(0,y.az)("form",{action:"javascript:",onSubmit:this.__sendSuccess,children:[(0,y.az)("input",{type:"email"===r?r:"text",value:t.value,class:"paper-input",style:{width:"80%"},onInput:this.onInput,placeholder:n}),(0,y.az)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,y.az)("span",{class:"action-button hoverable update-action",onClick:this.__sendSuccess,children:"Update"}),(0,y.az)("span",{onClick:e.close,class:"action-button hoverable update-action",children:"Cancel"})]})]})]})]})},t}(y.ZP),S=r(4383),P=r(77),k=r(3735),x=r(9067),L=r(3659),D=r(6007),I=r(9264);r.d(t,{default:function(){return K}});var A=S.h.getStore(),U={},C={ig_user_id:I.oS,email:I.sQ,school:I.oS},R="heading-text hoverable landing-action-button",V=function(e){function t(t){var r;return r=e.call(this,t)||this,z()(v()(r),"requestEditUserDetail",(function(e){!r.state.isEditing&&A.isLoggedIn&&r.setState({isEditing:!0,fieldEdited:e})})),z()(v()(r),"syncProfileInfoWithServer",(function(e){if(!r.state.workProgress){var t,n=r.state.fieldEdited,i=C[n](e);if(i.valid)r.setState({workProgress:"Syncing new data with the server..."}),(0,k.V)(P.EA.edit,{user:A.userData.id,field:n,new_value:p()(t=e||"").call(t)}).then((function(e){var t=e.error||e.data.error;if(t)return r.setState({error:t,workProgress:null});r.setState({workProgress:null,isEditing:null,fieldEdited:null});var n=e.data.user_data;S.h.set("userData",n),r.setState({__receivedData:n})}));else r.setState({error:i.error,workProgress:null})}})),z()(v()(r),"_getRequestEditUserDetail",(function(e){return function(){return r.requestEditUserDetail(e)}})),z()(v()(r),"closePrompt",(function(){return r.setState({isEditing:!1,fieldEdited:null})})),z()(v()(r),"resetError",(function(){return r.setState({error:null})})),r.state={isEditing:!1,fieldEdited:null,__receivedData:t.data},r}return w()(t,e),t.prototype.render=function(e,t){var r,n,i=this,a=t.__receivedData,s=a.secure_data||U,o=A.isLoggedIn&&A.userData.id;return(0,y.az)("div",{children:[t.isEditing&&(0,y.az)(y.HY,{children:[t.error&&(0,y.az)(x.OK,{errorHead:"Can't edit",close:this.resetError,reason:t.error}),(0,y.az)(b,{progress:this.state.workProgress,close:this.closePrompt,detailName:t.fieldEdited,onUpdate:this.syncProfileInfoWithServer})]}),(0,y.az)("div",{class:"heading-text bfont",children:"Profile"}),(0,y.az)("div",{style:{fontSize:"0.96rem"},children:"You can edit your email, instagram and school fields by clicking them"}),(0,y.az)("div",{class:"prof-data-box",children:f()(r=u()(n=["name","id","current_level","is_admin","school"]).call(n,(0,L.Z)(s))).call(r,(function(e){return function(e,t,r,n){return(0,y.az)("div",{onClick:e in C?t(e):null,class:"prof-container"+(e in C?" hoverable":""),children:[(0,y.az)("div",{class:"heading-text prof-field",children:E[e]||e}),(0,y.az)("div",{class:"prof-field",children:H(r,n,e)})]})}(e,i._getRequestEditUserDetail,a,s)}))}),(0,y.az)("div",{class:"action-buttons-profile",children:(0,y.az)(q,{data:a,currID:o})})]})},t}(y.wA);function q(e){var t=e.data,r=e.currID;return(0,y.az)(y.HY,{children:[N(t,r)&&(0,y.az)(y.A,{href:"/__admin__",class:R,children:"Admin Panel"}),t.id===r&&[!t.has_verified_email&&(0,y.az)(y.A,{href:"/verify-email",class:R,children:"Verify Email"}),(0,y.az)(y.A,{href:"/logout",class:R,children:"Logout"})]]})}function T(){return $.apply(this,arguments)}function $(){return($=l()(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new(s())(y.F0.getQs),r=t.get("id"),!A.isLoggedIn||r!==A.userData.id){e.next=6;break}n=A.userData,e.next=11;break;case 6:return e.next=8,(0,k.A)(P.EA.getUserDetails+"?id="+r);case 8:n=(n=e.sent).data,D.k.sendUserLog({type:D.k.profileView,userViewed:n.id});case 11:if(!n){e.next=13;break}return e.abrupt("return",(function(){return(0,y.az)(V,{data:n})}));case 13:return e.abrupt("return",(function(){return(0,y.az)(x.OK,{errorHead:"Profile Error",reasons:["User does not exist"],close:function(){return(0,y.uX)("/")}})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,r){var n=r in e?e[r]:t[r];return null==n&&(n="N/A"),"is_admin"===r&&(n=!0===n?"Team Halocrypt":"Player"),n}function N(e,t){return e.is_admin&&e.id===t}var Q={id:"Loading..",current_level:"Infinity",has_verified_email:null,name:"??"},K=function(){return new(s())(y.F0.getQs).get("id")?(0,y.az)(y.gr,{componentPromise:T,fallbackComponent:function(){return(0,y.az)(V,{data:Q})}}):A.isLoggedIn?(0,y.uX)("/profile?id="+A.userData.id):(0,y.uX)("/login")}},9067:function(e,t,r){"use strict";r.d(t,{OK:function(){return l},Pt:function(){return c}});var n=r(2991),i=r.n(n),a=r(1942),s=r.n(a),o=r(2386);function l(e){return(0,o.az)(u,s()(s()({},e),{},{title:"Something Ain't Right"}))}var c=/([^\w]|_)/g;function u(e){var t;return(0,o.az)("div",{class:"app-popup",children:[(0,o.az)("div",{class:"heading-text clr app-popup-title",children:e.title}),(0,o.az)("div",{children:e.errorHead}),(0,o.az)("div",{class:"err-reasons",children:(0,o.az)("div",{children:i()(t=e.reasons).call(t,(function(e){return(0,o.az)("div",{children:[" - ",e]})}))})}),(0,o.az)("button",{class:"app-popup-close",onClick:e.close,children:"OK"})]})}},9264:function(e,t,r){"use strict";r.d(t,{Vy:function(){return i},sQ:function(){return a},oS:function(){return s},Bj:function(){return o},RX:function(){return l},u2:function(){return c},R0:function(){return u}});r(4916),r(5306);var n=r(9067),i={valid:!0};function a(e){return e?i:{error:"Value required"}}var s=function(){return i};function o(e){return e.length<5?{error:u.pwLength}:i}function l(e){var t=e.length;return t<3||t>30?{error:u.userLength}:e!==e.replace(n.Pt,"")?{error:u.invalidCharacters}:i}function c(e){var t=e.length;return!t||t>30?{error:u.nameLength}:i}var u={userLength:"Username should be between 3 and 30 characters",invalidCharacters:"Username and name can not contain special characters",invalidEmail:"Invalid email",nameLength:"Name should be less than 30 characters and cannot be blank",pwLength:"Password should be longer than 5 characters",pwNomatch:"Passwords do not match"}},1103:function(e,t,r){r(5160);var n=r(4058);e.exports=n.Date.now},5160:function(e,t,r){r(6887)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},7784:function(e,t,r){var n=r(1103);e.exports=n},5306:function(e,t,r){"use strict";var n=r(7007),i=r(9670),a=r(7908),s=r(7466),o=r(9958),l=r(4488),c=r(1530),u=r(7651),d=Math.max,f=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(e,t,r,n){var v=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=n.REPLACE_KEEPS_$0,w=v?"$":"$0";return[function(r,n){var i=l(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,i,n):t.call(String(i),r,n)},function(e,n){if(!v&&m||"string"==typeof n&&-1===n.indexOf(w)){var a=r(t,e,this,n);if(a.done)return a.value}var l=i(e),h=String(this),p="function"==typeof n;p||(n=String(n));var g=l.global;if(g){var z=l.unicode;l.lastIndex=0}for(var y=[];;){var E=u(l,h);if(null===E)break;if(y.push(E),!g)break;""===String(E[0])&&(l.lastIndex=c(h,s(l.lastIndex),z))}for(var b,S="",P=0,k=0;k<y.length;k++){E=y[k];for(var x=String(E[0]),L=d(f(o(E.index),h.length),0),D=[],I=1;I<E.length;I++)D.push(void 0===(b=E[I])?b:String(b));var A=E.groups;if(p){var U=[x].concat(D,L,h);void 0!==A&&U.push(A);var C=String(n.apply(void 0,U))}else C=_(x,h,L,D,A,n);L>=P&&(S+=h.slice(P,L)+C,P=L+x.length)}return S+h.slice(P)}];function _(e,r,n,i,s,o){var l=n+e.length,c=i.length,u=g;return void 0!==s&&(s=a(s),u=p),t.call(o,u,(function(t,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(l);case"<":o=s[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>c){var d=h(u/10);return 0===d?t:d<=c?void 0===i[d-1]?a.charAt(1):i[d-1]+a.charAt(1):t}o=i[u-1]}return void 0===o?"":o}))}}))}}]);