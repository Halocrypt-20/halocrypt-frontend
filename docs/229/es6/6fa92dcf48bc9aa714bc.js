(window.webpackJsonp=window.webpackJsonp||[]).push([[229,564],{7:(t,e,s)=>{"use strict";s.d(e,{u:()=>l,k:()=>c});var i=s(77),n=s(649),a=s(804),r=s(369);const o=(0,r.Z)({},window.__initConfig);window.__initConfig=null;const u=a.h.getStore(),l=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||setTimeout;const c=new class{constructor(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile",this.passwordResetRequested="password-reset"}__shouldPostLog(){return!1}_admin_getLogs(){if(u.isLoggedIn&&u.userData.is_admin)return(0,n.A)(i.PW.getLogs)}sendUserLog(t){const e="string"==typeof t?{type:t}:t,s=(0,r.Z)({},e,o);this.__shouldPostLog()?l(()=>(0,n.V)(i.PW.addLog,s)):console.log("prod log post ->",s)}};window.onerror=(t,e,s,i,n)=>{const a=n||{};t=t||a.message||"";const r=n.line||a.message||0,o=n.column||0,u=a.script||"",l=a.stackTrace||a.stack||"",d=Date.now(),h=location.href;c.sendUserLog({type:"js-error",timestamp:d,message:t,line:r,column:o,script:u,stack:l,url:h,source:e})}},564:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>p,Question:()=>v,getLinkOrTextNode:()=>f});var i=s(386),n=s(804),a=s(77),r=s(649),o=(s(710),s(67)),u=s(7);function l(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const c=n.h.getStore(),d=t=>(t||"").toLowerCase().replace(/\s/g,""),h=(0,i.az)(v,{data:{question_level:"Loading",question:"Finding your question",hint:[]}});class p extends i.wA{constructor(...t){var e;super(...t),e=this,l(this,"state",{fetchedQuestion:null,isFetching:!1,answer:"",isAwaitingAnswer:!1,incorrect:!1}),l(this,"onInput",t=>this.setState({answer:d(t.target.value)})),l(this,"_submit",(async function(){if(e.state.isAwaitingAnswer)return;e.setState({isAwaitingAnswer:!0});const t=e.state.answer,s=e.state.fetchedQuestion&&e.state.fetchedQuestion.question_level||1;if(!t)return;const i={answer:t},n=(await(0,r.V)(a.hY.answerQuestion,i)).data;if(u.k.sendUserLog({type:u.k.answeredQuestion,question_level:s}),n.result)return e.proceedToNextLevel();e.setState({isAwaitingAnswer:!1,incorrect:!0})})),l(this,"proceedToNextLevel",()=>{u.k.sendUserLog({type:u.k.accessQuestion,question_level:(this.state.fetchedQuestion&&this.state.fetchedQuestion.question_level||0)+1}),this.setState({fetchedQuestion:null})}),l(this,"resetError",()=>this.setState({incorrect:!1}))}componentDidMount(){if(!c.isLoggedIn)return(0,i.uX)("/login?next=/play");u.k.sendUserLog(u.k.pageViewPlay),this.fetchQuestion()}componentDidUpdate(){if(null==this.state.fetchedQuestion)return this.fetchQuestion()}async fetchQuestion(){if(this.state.isFetching||!c.eventBegan)return;this.setState({isFetching:!0});const t=await(0,r.A)(a.hY.getQuestion);if(t.error)return this.setState({hasError:!0,isFetching:!1,fetchedQuestion:1});const e=t.data;this.setState({fetchedQuestion:e,isFetching:!1})}render(t,e){return c.isLoggedIn&&c.userData.is_disqualified?(0,i.az)("div",{class:{fontSize:"4rem"},children:"Disqualified!"}):c.eventBegan?(0,i.az)(i.HY,{children:[e.incorrect&&(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"mask"}),(0,i.az)(o.OK,{errorHead:"Nope",reasons:["That is not the right answer"],close:this.resetError})]}),e.isFetching||!e.fetchedQuestion?h:(0,i.az)(v,{data:e.fetchedQuestion,value:e.answer,onInput:this.onInput,onSubmit:this._submit}),e.isAwaitingAnswer&&"Checking your answer..."]}):(0,i.az)("div",{style:{fontSize:"4rem"},children:"Not yet"})}}const g={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:!1,style:{width:"90%"}};function v(t){const{data:e,value:s,onInput:n,onSubmit:a,disableInput:r}=t;return e.game_over?"You win (?)":(0,i.az)("form",{action:"javascript:",onSubmit:a,children:[(0,i.az)("div",{class:"question-num",children:["Question - ",e.question_level]}),(0,i.az)("div",{class:"question-card",children:[(0,i.az)("div",{children:f(e.question)}),(0,i.az)("div",{class:"question-hint",children:e.hint&&!!e.hint.length&&e.hint.map((t,e)=>(0,i.az)(m,{data:t,i:e}))}),!r&&(0,i.az)("input",{...Object.assign({class:"paper-input",placeholder:"Answer",onInput:n,value:s},g)})]}),!r&&(0,i.az)("button",{class:"action-button heading-text sbm-button hoverable",children:"Submit"})]})}function f(t){if("string"==typeof t)return t;const e=t.type,s=t.value;return"text"===e?s:"link"===e?(0,i.az)("a",{target:"_blank",href:s,style:{textDecoration:"underline",color:"var(--spec-color)"},children:s}):void 0}function m(t){const e=t.data,s=t.i;return e&&!!e.value&&(0,i.az)("div",{children:[`Hint ${s+1}: `,f(e)]})}},229:(t,e,s)=>{"use strict";s.r(e);var i=s(386),n=s(804),a=s(77),r=s(649);const o=t=>t.data;function u(){return(0,r.A)(a.SA.getLatestQuestionNumber).then(o)}function l(){return(0,r.A)(a.SA.getAllQuestions).then(o)}const c=()=>"Loading data...";var d=s(67),h=s(564);function p(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const g={type:"text",value:""},v={text:"link",link:"text"};class f extends i.wA{constructor(...t){super(...t),p(this,"state",{hasQuestionData:null,question:{...g},hint:[],special:[],answer:""}),p(this,"_handleQuestion",t=>{const e={value:t.target.value||"",type:t.target.dataset.type};this.syncProp("question",e)}),p(this,"_handleAnswer",t=>{const e=t.target.value||"";this.syncProp("answer",e)}),p(this,"componentDidUpdate",this.componentDidMount),p(this,"_handleHintLike",t=>e=>{const s=+e.target.dataset.value,i=e.target.value||"",n=e.target.dataset.type;this.setState(e=>{const a=[].slice.call(e[t]||[]);return a[s]={value:i,type:n},e[t]=a,this.props.propUpdater(t,a.filter(t=>t.value&&t.value.trim())),e})}),p(this,"_add",t=>()=>this.setState(e=>{const s=[].slice.call(e[t]);return s.push(g),e[t]=s,e})),p(this,"toggleHintType",t=>{const e=+t.target.dataset.value,s=t.target.dataset.type,i=t.target.dataset.name;this.setState(t=>{const n=t[i],a={...n[e]};return a.type=v[s],n[e]=a,this.props.propUpdater(i,n),t})}),p(this,"toggleQuestionType",t=>{const e=t.target.dataset.type,s=v[e],i={...this.state.question};i.type=s,this.syncProp("question",i)})}syncProp(t,e){this.setState({[t]:e}),this.props.propUpdater(t,e)}setDefaultValues(t){["hint","special"].forEach(e=>{t[e]&&t[e].length||(t[e]=[g],this.props.propUpdater(e,t[e]))})}componentDidMount(){if(this.state.hasQuestionData&&this.state.question_level===this.props.questionData.question_level)return;const t={...this.props.questionData};this.setDefaultValues(t),this.setState({hasQuestionData:!0,...t})}render(t,e){if(e.hasQuestionData)return(0,i.az)("form",{action:"javascript:",onSubmit:t.onSubmit,children:[(0,i.az)(z,{question:e.question,handleQuestion:this._handleQuestion,toggleQuestionType:this.toggleQuestionType}),(0,i.az)("hr",{}),(0,i.az)(b,{answer:e.answer,handleAnswer:this._handleAnswer}),(0,i.az)("hr",{}),["hint","special"].map(t=>(0,i.az)(m,{propName:t,propVal:e[t],handleHint:this._handleHintLike,toggleType:this.toggleHintType,add:this._add})),(0,i.az)("button",{class:"action-button hoverable",children:"Submit"})]})}}function m(t){const e=t.propName,s=t.propVal,n=t.handleHint,a=t.toggleType,r=t.add;return(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"input-parent",children:[(0,i.az)("div",{class:"task-desc",children:[e,":"]}),(0,i.az)(w,{name:e,hint:s,handleHint:n(e),setType:a}),(0,i.az)(y,{add:r(e),name:e})]}),(0,i.az)("hr",{})]})}function b(t){return(0,i.az)("div",{class:"input-parent",children:[(0,i.az)("div",{class:"task-desc",children:"Answer:"}),(0,i.az)("input",{class:"paper-input",value:t.answer,placeholder:"Answer",onInput:t.handleAnswer})]})}function z(t){return(0,i.az)("div",{class:"input-parent",children:[(0,i.az)("div",{class:"task-desc",children:"Question:"}),(0,i.az)("div",{children:["Type ",t.question.type]}),(0,i.az)("input",{"data-type":t.question.type,class:"paper-input",value:t.question.value,placeholder:"Question",onInput:t.handleQuestion}),(0,i.az)("div",{"data-type":t.question.type,class:"hoverable action-button",style:{padding:0},onClick:t.toggleQuestionType,children:"Toggle Type"})]})}function w(t){let{hint:e,handleHint:s,name:n}=t;return(!e||e.length<=0)&&(e=[g]),e.map((e,a)=>(0,i.az)("div",{class:"hints-parent-admin",children:[t.setType&&"Type: "+e.type,(0,i.az)("input",{"data-value":a,class:"paper-input","data-type":e.type,value:e.value,placeholder:`${n} #${a}`,onInput:s}),t.setType&&(0,i.az)("div",{"data-type":e.type,"data-value":a,"data-name":n,onClick:t.setType,class:"hoverable action-button",style:{padding:0},children:"Toggle Type"})]}))}function y(t){return(0,i.az)("img",{class:"hoverable plus back",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0Ij48cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIgZmlsbD0iI2ZmZiIgLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+",title:"add "+t.name,onClick:t.add})}var S=s(7);function Q(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class k extends i.wA{constructor(...t){super(...t),Q(this,"url",a.SA.addQuestion),Q(this,"state",{questionData:{question:{...g},hint:[],special_hint:[]}}),Q(this,"_sendQuestion",()=>{this.setState({isLoading:!0}),(0,r.V)(this.url,this.state.questionData).then(t=>{if(t.error||t.data.error)return this.setState({isLoading:!1,error:t.error||t.data.error});this.props.close()})}),Q(this,"_propUpdater",(t,e)=>this.setState(s=>(s.questionData[t]=e,s))),Q(this,"_reset",()=>this.setState({error:!1}))}async getLastQuestionData(){this.setState({isLoading:!0,data:null,showLastQuestion:!1});const t=await u(),e=this.state.questionData;let s=t.question_number;null==s&&(s=-1),e.question_level=s+1,this.setState({data:!0,isLoading:!1,questionData:e})}componentDidMount(){this.getLastQuestionData()}render(t,e){if(e.isLoading)return(0,i.az)(c,{});if(e.data){if(e.error)return(0,i.az)(d.OK,{errorHead:"unknown error",reasons:["check your console?"],close:this._reset});if(!e.success)return(0,i.az)(T,{propUpdater:this._propUpdater,sendQuestion:this._sendQuestion,questionData:e.questionData})}}}const D=t=>(t+"").replace(d.Pt,"").toLowerCase(),_=(t,e)=>D(t).includes(e);class q extends k{constructor(...t){super(...t),Q(this,"state",{questionData:{question:"",hint:[],special_hint:[]},questionData:null,isLoading:!1,data:!1,fetchedQuestions:null,filteredData:null,searchValue:""}),Q(this,"url",a.SA.editQuestion),Q(this,"_search",t=>{const e=t.target.value||"";let s;const i=this.state.fetchedQuestions;(0,S.u)(()=>{s=e?i.filter(t=>function(t,e){const s=D(e),{question:i,question_level:n,hint:a,answer:r}=t;if(_(i,s)||_(n,s)||_(r,s))return!0;if(a&&a.length)for(const t of a)if(_(t.value||t,s))return!0;return!1}(t,e.trim())):i,this.setState({filteredData:s})}),this.setState({searchValue:e})}),Q(this,"_setEditQuestion",t=>{const e=+t.target.dataset.bind,s=this.state.filteredData[e];this.setState({questionData:s})})}async fetchAll(){this.setState({isLoading:!0});const t=await l();this.setState({data:!0,isLoading:!1,fetchedQuestions:t,filteredData:t})}componentDidMount(){this.fetchAll()}render(t,e){if(e.isLoading)return(0,i.az)(c,{});if(e.data){if(e.error)return(0,i.az)(d.OK,{errorHead:"unknown error",reasons:["check your console?"],close:this._reset});if(e.data){if(!e.questionData&&e.filteredData){const t=e.filteredData.length;return(0,i.az)("div",{children:[(0,i.az)("div",{style:{fontSize:"2rem"},children:["Result: ",t," ",I("Question",t)]}),(0,i.az)("div",{class:"search-box",children:[(0,i.az)("div",{style:{marginBottom:"10px"},children:"Search By Question/Question number/Answer/Hint Content"}),(0,i.az)("input",{value:e.searchValue,class:"paper-input",onInput:this._search})]}),(0,i.az)("hr",{}),(0,i.az)("div",{children:(0,i.az)(A,{filteredData:e.filteredData,setEditQuestion:this._setEditQuestion})})]})}return e.questionData?(0,i.az)(T,{questionData:e.questionData,propUpdater:this._propUpdater,sendQuestion:this._sendQuestion}):void 0}}}}function A(t){return t.filteredData.map((e,s)=>(0,i.az)("div",{class:"c_u question-parent",children:[(0,i.az)(h.Question,{data:e,disableInput:!0}),(0,i.az)("button",{"data-bind":s,onClick:t.setEditQuestion,class:"action-button hoverable edit-q",children:["Edit Question ",e.question_level]})]}))}class T extends i.wA{constructor(...t){super(...t),Q(this,"state",{showGameLivePreview:!0}),Q(this,"_toggle",()=>this.setState(t=>({showGameLivePreview:!t.showGameLivePreview})))}render(t,e){const{propUpdater:s,sendQuestion:n,questionData:a}=t,r=e.showGameLivePreview;return(0,i.az)("div",{children:[(0,i.az)("button",{onClick:this._toggle,class:"heading-text last-q hoverable action-button",children:[r?"hide":"show"," Live Preview"]}),r&&(0,i.az)("div",{class:"last-question-card",children:(0,i.az)(h.Question,{data:a,disableInput:!0})}),(0,i.az)(f,{propUpdater:s,onSubmit:n,questionData:a})]})}}function I(t,e){return 1===e?t:t+"s"}class U extends i.wA{constructor(...t){super(...t),Q(this,"state",{currentTask:null}),Q(this,"closeWorkspaceTask",()=>this.setState({currentTask:null})),Q(this,"setTask_addQuestion",()=>this.setState({currentTask:k})),Q(this,"setTask_editQuestion",()=>this.setState({currentTask:q}))}render(t,e){if(null==e.currentTask)return(0,i.az)("div",{children:[(0,i.az)("span",{children:"Available Actions:"}),(0,i.az)("button",{class:"btn-act hoverable",onClick:this.setTask_addQuestion,children:"Add Question"}),(0,i.az)("button",{class:"btn-act hoverable",onClick:this.setTask_editQuestion,children:"Edit Question"})]});const s=this.state.currentTask;return(0,i.az)(s,{close:this.closeWorkspaceTask})}}function L(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class x extends i.wA{constructor(...t){super(...t),L(this,"state",{isFetching:!1,fetchedUsers:null,filteredUsers:null,query:""}),L(this,"execSearchQueryAsynchronously",t=>{const e=t.target.value||"",s=D(e);return this.state.fetchedUsers&&this.state.fetchedUsers.length?e?void(0,S.u)(()=>{const t=this.state.fetchedUsers.filter(t=>{const e=t.name,i=t.id;return _(e,s)||_(i,s)});this.setState({error:!1,filteredUsers:t})}):this.setState({filteredUsers:this.state.fetchedUsers}):this.setState({filteredUsers:[]})}),L(this,"setUserEditingCandidate",t=>{const e=+t.target.dataset.eindex;this.setState({isEditingUserDetails:!0,currentUserDetails:this.filteredUsers[e],currentEditIndex:e})})}fetchUsers(){this.state.isFetching||(this.setState({isFetching:!0}),(0,r.A)(a.SA.getAllUsers).then(t=>{const e=t.error||t.data.error;if(e)return this.setState({error:e});const s=t.data;this.setState({isFetching:!1,error:!1,fetchedUsers:s,filteredUsers:s})}))}componentDidMount(){this.fetchUsers()}render(t,e){if(e.isFetching)return"fetching all user data...";if(e.error)return(0,i.az)("div",{children:["An error occured: ",(0,i.az)("div",{children:e.error})]});if(e.isEditingUserDetails)return(0,i.az)(UserProfileEditor,{userDetails:e.currentUserDetails,propUpdateCallback:this._syncProps});const s=this.state.filteredUsers&&this.state.filteredUsers.length;return(0,i.az)("div",{children:[(0,i.az)("div",{style:{fontSize:"0.96rem"},children:"Click a user to edit"}),(0,i.az)("div",{class:"input-parent",children:(0,i.az)("input",{placeholder:"Search by username or name",class:"paper-input",onInput:this.execSearchQueryAsynchronously})}),e.filteredUsers&&(0,i.az)(i.HY,{children:[(0,i.az)("div",{style:{fontSize:"2rem"},children:["Results: ",s," ",I("User",s)]}),(0,i.az)("div",{class:"search-results heading-text",children:e.filteredUsers.map((t,e)=>(0,i.az)("div",{"data-eindex":e,class:"search-result-element hoverable",onClick:this.setUserEditingCandidate,children:[t.id," ( ",t.name," )"]}))})]})]})}}function P(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,{default:()=>M});const C=n.h.getStore();function M(){return C.isLoggedIn&&C.userData.is_admin?(0,i.az)("div",{class:"admin-data-panel",children:(0,i.az)(H,{})}):(0,i.az)("div",{style:{fontSize:"8rem"},children:"NO"})}class H extends i.wA{constructor(...t){super(...t),P(this,"state",{currentTab:"questions"}),P(this,"setTab",t=>this.setState({currentTab:t?t.target.dataset.tab:null}))}render(t,e){const s="questions"===e.currentTab,n="users"===e.currentTab;e.currentTab;return(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"btn-box",children:["questions","users","logs"].map(t=>e.currentTab!==t&&(0,i.az)("button",{onClick:this.setTab,"data-tab":t,class:"admin-button-tab",children:t}))}),(0,i.az)("div",{style:{fontSize:"2rem"},children:["Workspace: ",e.currentTab||"Not selected"]}),this.state.currentTab&&(0,i.az)("div",{style:{textAlign:"left"},children:(0,i.az)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNi4wMSAxMUg0djJoMTIuMDF2M0wyMCAxMmwtMy45OS00eiIvPjwvc3ZnPg==",class:"back hoverable",title:"go back",onClick:()=>this.setTab()})}),s&&(0,i.az)(U,{}),n&&(0,i.az)(x,{})]})}}},710:(t,e,s)=>{"use strict";s.d(e,{H:()=>a});var i=s(386);function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class a extends i.wA{constructor(...t){super(...t),n(this,"state",{id:Math.random(),isFocused:!1,value:this.props.value||""}),n(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0,moveDown:!1})),n(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1,moveDown:!0})),n(this,"onInput",t=>this.setState({value:t.target.value})),n(this,"__onInput",t=>{const e=this.props.onInput;this.onInput(t),null!=e&&e(t)})}render({id:t,labelText:e="",type:s="text",inputClass:n,extraProps:a},{isFocused:o,moveDown:u}){const l=t||this.state.id,c=this.state.value,d=["_animate",o||c?"moveup":"",u?"movedown":""];return(0,i.h)("div",{class:"user-input-anim "+(n||"")},(0,i.h)("label",{class:d,for:l},e),(0,i.h)(r,{onFocus:this.onFocus,onBlur:this.onBlur,type:s,value:c,extraProps:a,id:l,onInput:this.__onInput}))}}function r({onFocus:t,onBlur:e,onInput:s,id:n,type:a,value:r,extraProps:o}){return(0,i.h)("input",{onFocus:t,onBlur:e,onInput:s,id:n,value:r,type:a,...o,class:"paper-input"})}},67:(t,e,s)=>{"use strict";s.d(e,{OK:()=>n,Pt:()=>a});var i=s(386);function n(t){return(0,i.az)(r,{...Object.assign({},t,{title:"Something Ain't Right"})})}const a=/([^\w]|_)/g;function r(t){return(0,i.az)("div",{class:"app-popup",children:[(0,i.az)("div",{class:"heading-text clr app-popup-title",children:t.title}),(0,i.az)("div",{children:t.errorHead}),(0,i.az)("div",{class:"err-reasons",children:(0,i.az)("div",{children:t.reasons.map(t=>(0,i.az)("div",{children:[" - ",t]}))})}),(0,i.az)("button",{class:"app-popup-close",onClick:t.close,children:"OK"})]})}}}]);