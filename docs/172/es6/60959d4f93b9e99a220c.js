(window.webpackJsonp=window.webpackJsonp||[]).push([[172,326,564],{7:(e,t,s)=>{"use strict";s.d(t,{u:()=>d,k:()=>c});var i=s(77),a=s(649),n=s(804),r=s(369);const o=(0,r.Z)({},window.__initConfig);window.__initConfig=null;const l=n.h.getStore(),d=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||setTimeout;const c=new class{constructor(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile",this.passwordResetRequested="password-reset"}__shouldPostLog(){return!1}_admin_getLogs(){if(l.isLoggedIn&&l.userData.is_admin)return(0,a.A)(i.PW.getLogs)}sendUserLog(e){const t="string"==typeof e?{type:e}:e,s=(0,r.Z)({},t,o);this.__shouldPostLog()?d(()=>(0,a.V)(i.PW.addLog,s)):console.log("prod log post ->",s)}};window.onerror=(e,t,s,i,a)=>{const n=a||{};e=e||n.message||"";const r=a.line||n.message||0,o=a.column||0,l=n.script||"",d=n.stackTrace||n.stack||"",u=Date.now(),h=location.href;c.sendUserLog({type:"js-error",timestamp:u,message:e,line:r,column:o,script:l,stack:d,url:h,source:t})}},564:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,Question:()=>f,getLinkOrTextNode:()=>v});var i=s(386),a=s(804),n=s(77),r=s(649),o=s(67),l=s(7);function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=a.h.getStore(),u=e=>(e||"").toLowerCase().replace(/\s/g,""),h=(0,i.az)(f,{data:{question_level:"Loading",question:"Finding your question",hint:[]}});class p extends i.wA{constructor(...e){var t;super(...e),t=this,d(this,"state",{fetchedQuestion:null,isFetching:!1,answer:"",isAwaitingAnswer:!1,incorrect:!1}),d(this,"onInput",e=>this.setState({answer:u(e.target.value)})),d(this,"_submit",(async function(){if(t.state.isAwaitingAnswer)return;const e=t.state.answer,s=t.state.fetchedQuestion&&t.state.fetchedQuestion.question_level||1;if(!e)return;t.setState({isAwaitingAnswer:!0});const i={answer:e},a=(await(0,r.V)(n.hY.answerQuestion,i)).data;if(l.k.sendUserLog({type:l.k.answeredQuestion,question_level:s}),a.result)return t.proceedToNextLevel();t.setState({isAwaitingAnswer:!1,incorrect:!0})})),d(this,"proceedToNextLevel",()=>{l.k.sendUserLog({type:l.k.accessQuestion,question_level:(this.state.fetchedQuestion&&this.state.fetchedQuestion.question_level||0)+1}),this.setState({fetchedQuestion:null,isAwaitingAnswer:!1,incorrect:!1,value:""})}),d(this,"resetError",()=>this.setState({incorrect:!1}))}componentDidMount(){if(!c.isLoggedIn)return(0,i.uX)("/login?next=/play");l.k.sendUserLog(l.k.pageViewPlay),this.fetchQuestion()}componentDidUpdate(){if(null==this.state.fetchedQuestion)return this.fetchQuestion()}async fetchQuestion(){if(this.state.isFetching||!c.eventBegan&&!c.userData.is_admin)return;this.setState({isFetching:!0});const e=await(0,r.A)(n.hY.getQuestion);if(e.error)return this.setState({hasError:!0,isFetching:!1,fetchedQuestion:1});const t=e.data;this.setState({fetchedQuestion:t,isFetching:!1})}render(e,t){return c.isLoggedIn&&c.userData.is_disqualified?(0,i.az)("div",{class:{fontSize:"4rem"},children:"Disqualified!"}):c.eventBegan||c.isLoggedIn&&c.userData.is_admin?(0,i.az)(i.HY,{children:[t.incorrect&&(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"mask"}),(0,i.az)(o.OK,{errorHead:"Nope",reasons:["That is not the right answer"],close:this.resetError})]}),t.isFetching||!t.fetchedQuestion?h:(0,i.az)(f,{data:t.fetchedQuestion,value:t.answer,onInput:this.onInput,onSubmit:this._submit}),t.isAwaitingAnswer&&"Checking your answer..."]}):(0,i.az)("div",{style:{fontSize:"4rem"},children:"Not yet"})}}const g={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:!1,style:{width:"90%"}};function f(e){const{data:t,value:s,onInput:a,onSubmit:n,disableInput:r}=e;return t.game_over?"You win (?)":(0,i.az)("form",{action:"javascript:",onSubmit:n,children:[(0,i.az)("div",{class:"question-num",children:["Question - ",t.question_level]}),(0,i.az)("div",{class:"question-card",children:[(0,i.az)("div",{children:v(t.question)}),(0,i.az)("div",{class:"question-hint",children:t.hint&&!!t.hint.length&&t.hint.map((e,t)=>(0,i.az)(m,{data:e,i:t}))}),!r&&(0,i.az)("input",{...Object.assign({class:"paper-input",placeholder:"Answer",onInput:a,value:s},g)})]}),!r&&(0,i.az)("button",{class:"action-button heading-text sbm-button hoverable",children:"Submit"})]})}function v(e){if("string"==typeof e)return e;const t=e.type,s=e.value;return"text"===t?s:"link"===t?(0,i.az)("a",{target:"_blank",href:s,style:{textDecoration:"underline",color:"var(--spec-color)",wordBreak:"break-all"},children:s}):void 0}function m(e){const t=e.data,s=e.i;return t&&!!t.value&&(0,i.az)("div",{children:[`Hint ${s+1}: `,v(t)]})}},326:(e,t,s)=>{"use strict";s.r(t);var i=s(386);function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const n={id:"Username",current_level:"Level",ig_user_id:"Insta",is_admin:"Player Type"};class r extends i.ZP{constructor(...e){super(...e),a(this,"__sendSuccess",()=>(this.state.value||"").trim()&&this.props.onUpdate(this.state.value)),a(this,"state",{value:this.props.value||""}),a(this,"onInput",e=>this.setState({value:e.target.value}))}render(e,t){const s=e.detailName,a=n[s]||s;return(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"mask"}),(0,i.az)("div",{class:"app-popup profile-info-updater",children:[(0,i.az)("div",{class:"heading-text clr",style:{marginTop:"5px",marginBottom:"10px"},children:["Edit ",a]}),e.progress&&(0,i.az)("div",{children:e.progress}),(0,i.az)("form",{action:"javascript:",onSubmit:this.__sendSuccess,children:[(0,i.az)("input",{type:"email"===s?s:"text",value:t.value,class:"paper-input",style:{width:"80%"},onInput:this.onInput,placeholder:a}),(0,i.az)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,i.az)("span",{class:"action-button hoverable update-action",onClick:this.__sendSuccess,children:"Update"}),(0,i.az)("span",{onClick:e.close,class:"action-button hoverable update-action",children:"Cancel"})]})]})]})]})}}var o=s(804),l=s(77),d=s(649),c=s(67),u=s(659),h=s(7),p=s(264);function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{Profile:()=>_,default:()=>A});const f=o.h.getStore(),v={},m="heading-text hoverable landing-action-button";class _ extends i.wA{constructor(...e){super(...e),g(this,"state",{isEditing:!1,fieldEdited:null,__receivedData:this.props.data}),g(this,"headerText","Profile"),g(this,"helpText","You can edit your email, instagram and school fields by clicking them"),g(this,"editableFieldsValidatorFunctions",{ig_user_id:p.oS,email:p.sQ,school:p.oS}),g(this,"requestEditUserDetail",e=>{!this.state.isEditing&&this._isAllowedToEditProfile()&&this.setState({isEditing:!0,fieldEdited:e})}),g(this,"syncProfileInfoWithServer",e=>{if(this.state.workProgress)return;const t=this.state.fieldEdited,s=this.editableFieldsValidatorFunctions[t](e);s.valid?(this.setState({workProgress:"Syncing new data with the server..."}),(0,d.V)(l.EA.edit,{user:this.state.__receivedData.id,field:t,new_value:(e||"").trim()}).then(this.__onResponse)):this.setState({error:s.error,workProgress:null})}),g(this,"__onResponse",e=>{if(!f.isLoggedIn)return;const t=e.error||e.data.error;if(t)return this.setState({error:t,workProgress:null});const s=e.data.user_data;this.setState({workProgress:null,isEditing:null,fieldEdited:null,__receivedData:s}),s.id===f.userData.id&&o.h.set("userData",s)}),g(this,"_getRequestEditUserDetail",e=>()=>this.requestEditUserDetail(e)),g(this,"closePrompt",()=>this.setState({isEditing:!1,fieldEdited:null})),g(this,"resetError",()=>this.setState({error:null}))}_getKeys(e){return["name","id","current_level","is_admin","school"].concat((0,u.Z)(e&&e.secure_data||v))}_getActionPanel(){const e=this.state.__receivedData,t=f.isLoggedIn&&f.userData.id;return(0,i.az)("div",{class:"action-buttons-profile",children:(0,i.az)(b,{data:e,currID:t})})}_isAllowedToEditProfile(){const e=f.userData?f.userData.id:null;return this.state.__receivedData.id===e}render(e,t){const s=t.__receivedData,a=s.secure_data||v;return(0,i.az)("div",{children:[t.isEditing&&(0,i.az)(i.HY,{children:[t.error&&(0,i.az)(c.OK,{errorHead:"Can't edit",close:this.resetError,reason:t.error}),(0,i.az)(r,{progress:this.state.workProgress,close:this.closePrompt,detailName:t.fieldEdited,onUpdate:this.syncProfileInfoWithServer,value:t.__receivedData[t.fieldEdited]||t.__receivedData.secure_data[t.fieldEdited]})]}),(0,i.az)("div",{class:"heading-text bfont",children:this.headerText}),(0,i.az)("div",{style:{fontSize:"0.96rem"},children:this._isAllowedToEditProfile()&&this.helpText}),(0,i.az)("div",{class:"prof-data-box",children:this._getKeys(s).map(e=>(0,i.az)(z,{editableFieldsValidatorFunctions:this.editableFieldsValidatorFunctions,x:e,getRequestEditUserDetail:this._getRequestEditUserDetail,data:s,sec:a}))}),this._getActionPanel()]})}}function b(e){const t=e.data,s=e.currID;return(0,i.az)(i.HY,{children:[S(t,s)&&(0,i.az)(i.A,{href:"/__admin__",class:m,children:"Admin Panel"}),t.id===s&&[!t.has_verified_email&&(0,i.az)(i.A,{href:"/verify-email",class:m,children:"Verify Email"}),(0,i.az)(i.A,{href:"/logout",class:m,children:"Logout"})]]})}function z(e){const{x:t,getRequestEditUserDetail:s,data:a,sec:r,editableFieldsValidatorFunctions:o}=e;return(0,i.az)("div",{onClick:t in o?s(t):null,class:"prof-container"+(t in o?" hoverable":""),children:[(0,i.az)("div",{class:"heading-text prof-field",children:n[t]||t}),(0,i.az)("div",{class:"prof-field",children:y(a,r,t)})]})}async function w(){const e=new URLSearchParams(i.F0.getQs).get("id");let t;return f.isLoggedIn&&e===f.userData.id?t=f.userData:(t=await(0,d.A)(`${l.EA.getUserDetails}?id=${e}`),t=t.data,h.k.sendUserLog({type:h.k.profileView,userViewed:t.id})),t?()=>(0,i.az)(_,{data:t}):()=>(0,i.az)(c.OK,{errorHead:"Profile Error",reasons:["User does not exist"],close:()=>(0,i.uX)("/")})}function y(e,t,s){let i=s in e?e[s]:t[s];return"is_admin"===s&&(i=!0===i?"Team Halocrypt":"Player"),null!=i&&""!==i||(i="N/A"),i}function S(e,t){return e.is_admin&&e.id===t}const D={id:"Loading..",current_level:"Infinity",has_verified_email:null,name:"??"},A=()=>new URLSearchParams(i.F0.getQs).get("id")?(0,i.az)(i.gr,{componentPromise:w,fallbackComponent:()=>(0,i.az)(_,{data:D})}):f.isLoggedIn?(0,i.uX)("/profile?id="+f.userData.id):(0,i.uX)("/login")},172:(e,t,s)=>{"use strict";s.r(t);var i=s(386),a=s(804),n=s(77),r=s(649);const o=e=>e.data;function l(){return(0,r.A)(n.SA.getLatestQuestionNumber).then(o)}function d(){return(0,r.A)(n.SA.getAllQuestions).then(o)}const c=()=>"Loading data...";var u=s(67),h=s(564);function p(e){const t=e.propName,s=e.propVal,a=e.handleHint,n=e.toggleType,r=e.add;return(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"input-parent",children:[(0,i.az)("div",{class:"task-desc",children:[t,":"]}),(0,i.az)(v,{name:t,hint:s,handleHint:a(t),setType:n}),(0,i.az)(m,{add:r(t),name:t})]}),(0,i.az)("hr",{})]})}function g(e){return(0,i.az)("div",{class:"input-parent",children:[(0,i.az)("div",{class:"task-desc",children:"Answer:"}),(0,i.az)("input",{class:"paper-input",value:e.answer,placeholder:"Answer",onInput:e.handleAnswer})]})}function f(e){return(0,i.az)("div",{class:"input-parent",children:[(0,i.az)("div",{class:"task-desc",children:"Question:"}),(0,i.az)("div",{children:["Type ",e.question.type]}),(0,i.az)("input",{class:"paper-input",value:e.question.value,placeholder:"Question",onInput:e.handleQuestion}),(0,i.az)("div",{"data-type":e.question.type,class:"hoverable action-button",style:{padding:0},onClick:e.toggleQuestionType,children:"Toggle Type"})]})}function v(e){let{hint:t,handleHint:s,name:a}=e;return(!t||t.length<=0)&&(t=[DEFAULT_INPUT]),t.map((t,n)=>(0,i.az)("div",{class:"hints-parent-admin",children:[e.setType&&"Type: "+t.type,(0,i.az)("input",{"data-value":n,class:"paper-input","data-type":t.type,value:t.value,placeholder:`${a} #${n}`,onInput:s}),e.setType&&(0,i.az)("div",{"data-type":t.type,"data-value":n,"data-name":a,onClick:e.setType,class:"hoverable action-button",style:{padding:0},children:"Toggle Type"})]}))}function m(e){return(0,i.az)("img",{class:"hoverable plus back",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0Ij48cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIgZmlsbD0iI2ZmZiIgLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+",title:"add "+e.name,onClick:e.add})}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={type:"text",value:""},z={text:"link",link:"text"};class w extends i.wA{constructor(...e){super(...e),_(this,"state",{hasQuestionData:null,question:{...b},hint:[],special:[],answer:""}),_(this,"_handleQuestion",e=>{const t={value:e.target.value||"",type:this.state.question.type};this.syncProp("question",t)}),_(this,"_handleAnswer",e=>{const t=e.target.value||"";this.syncProp("answer",t)}),_(this,"componentDidUpdate",this.componentDidMount),_(this,"_handleHintLike",e=>t=>{const s=+t.target.dataset.value,i=t.target.value||"",a=t.target.dataset.type;this.setState(t=>{const n=[].slice.call(t[e]||[]);return n[s]={value:i,type:a},t[e]=n,this.props.propUpdater(e,n.filter(e=>e.value&&e.value.trim())),t})}),_(this,"_add",e=>()=>this.setState(t=>{const s=[].slice.call(t[e]);return s.push(b),t[e]=s,t})),_(this,"toggleHintType",e=>{const t=+e.target.dataset.value,s=e.target.dataset.type,i=e.target.dataset.name;this.setState(e=>{const a=e[i],n={...a[t]};return n.type=z[s],a[t]=n,this.props.propUpdater(i,a),e})}),_(this,"toggleQuestionType",e=>{const t=e.target.dataset.type,s=z[t],i={...this.state.question};i.type=s,this.syncProp("question",i)})}syncProp(e,t){this.setState({[e]:t}),this.props.propUpdater(e,t)}setDefaultValues(e){["hint","special"].forEach(t=>{e[t]&&e[t].length||(e[t]=[b],this.props.propUpdater(t,e[t]))})}componentDidMount(){if(this.state.hasQuestionData&&this.state.question_level===this.props.questionData.question_level)return;const e={...this.props.questionData};this.setDefaultValues(e),this.setState({hasQuestionData:!0,...e})}render(e,t){if(t.hasQuestionData)return(0,i.az)("form",{action:"javascript:",onSubmit:e.onSubmit,children:[(0,i.az)(f,{question:t.question,handleQuestion:this._handleQuestion,toggleQuestionType:this.toggleQuestionType}),(0,i.az)("hr",{}),(0,i.az)(g,{answer:t.answer,handleAnswer:this._handleAnswer}),(0,i.az)("hr",{}),["hint","special"].map(e=>(0,i.az)(p,{propName:e,propVal:t[e],handleHint:this._handleHintLike,toggleType:this.toggleHintType,add:this._add})),(0,i.az)("button",{class:"action-button hoverable",children:"Submit"})]})}}var y=s(7);function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class D extends i.wA{constructor(...e){super(...e),S(this,"url",n.SA.addQuestion),S(this,"state",{questionData:{question:{...b},hint:[],special_hint:[]}}),S(this,"_sendQuestion",()=>{this.setState({isLoading:!0}),(0,r.V)(this.url,this.state.questionData).then(e=>{if(e.error||e.data.error)return this.setState({isLoading:!1,error:e.error||e.data.error});this.props.close()})}),S(this,"_propUpdater",(e,t)=>this.setState(s=>(s.questionData[e]=t,s))),S(this,"_reset",()=>this.setState({error:!1}))}async getLastQuestionData(){this.setState({isLoading:!0,data:null,showLastQuestion:!1});const e=await l(),t=this.state.questionData;let s=e.question_number;null==s&&(s=-1),t.question_level=s+1,this.setState({data:!0,isLoading:!1,questionData:t})}componentDidMount(){this.getLastQuestionData()}render(e,t){if(t.isLoading)return(0,i.az)(c,{});if(t.data){if(t.error)return(0,i.az)(u.OK,{errorHead:"unknown error",reasons:["check your console?"],close:this._reset});if(!t.success)return(0,i.az)(Q,{propUpdater:this._propUpdater,sendQuestion:this._sendQuestion,questionData:t.questionData})}}}const A=e=>(e+"").replace(u.Pt,"").toLowerCase(),k=(e,t)=>A(e).includes(t);class q extends D{constructor(...e){super(...e),S(this,"state",{questionData:{question:"",hint:[],special_hint:[]},questionData:null,isLoading:!1,data:!1,fetchedQuestions:null,filteredData:null,searchValue:""}),S(this,"url",n.SA.editQuestion),S(this,"_search",e=>{const t=e.target.value||"";let s;const i=this.state.fetchedQuestions;(0,y.u)(()=>{s=t?i.filter(e=>function(e,t){const s=A(t),{question:i,question_level:a,hint:n,answer:r}=e;if(k(i,s)||k(a,s)||k(r,s))return!0;if(n&&n.length)for(const e of n)if(k(e.value||e,s))return!0;return!1}(e,t.trim())):i,this.setState({filteredData:s})}),this.setState({searchValue:t})}),S(this,"_setEditQuestion",e=>{const t=+e.target.dataset.bind,s=this.state.filteredData[t];this.setState({questionData:s})})}async fetchAll(){this.setState({isLoading:!0});const e=await d();this.setState({data:!0,isLoading:!1,fetchedQuestions:e,filteredData:e})}componentDidMount(){this.fetchAll()}render(e,t){if(t.isLoading)return(0,i.az)(c,{});if(t.data){if(t.error)return(0,i.az)(u.OK,{errorHead:"unknown error",reasons:["check your console?"],close:this._reset});if(t.data){if(!t.questionData&&t.filteredData){const e=t.filteredData.length;return(0,i.az)("div",{children:[(0,i.az)("div",{style:{fontSize:"2rem"},children:["Result: ",e," ",U("Question",e)]}),(0,i.az)("div",{class:"search-box",children:[(0,i.az)("div",{style:{marginBottom:"10px"},children:"Search By Question/Question number/Answer/Hint Content"}),(0,i.az)("input",{value:t.searchValue,class:"paper-input",onInput:this._search})]}),(0,i.az)("hr",{}),(0,i.az)("div",{children:(0,i.az)(P,{filteredData:t.filteredData,setEditQuestion:this._setEditQuestion})})]})}return t.questionData?(0,i.az)(Q,{questionData:t.questionData,propUpdater:this._propUpdater,sendQuestion:this._sendQuestion}):void 0}}}}function P(e){return e.filteredData.map((t,s)=>(0,i.az)("div",{class:"c_u question-parent",children:[(0,i.az)(h.Question,{data:t,disableInput:!0}),(0,i.az)("button",{"data-bind":s,onClick:e.setEditQuestion,class:"action-button hoverable edit-q",children:["Edit Question ",t.question_level]})]}))}class Q extends i.wA{constructor(...e){super(...e),S(this,"state",{showGameLivePreview:!0}),S(this,"_toggle",()=>this.setState(e=>({showGameLivePreview:!e.showGameLivePreview})))}render(e,t){const{propUpdater:s,sendQuestion:a,questionData:n}=e,r=t.showGameLivePreview;return(0,i.az)("div",{children:[(0,i.az)("button",{onClick:this._toggle,class:"heading-text last-q hoverable action-button",children:[r?"hide":"show"," Live Preview"]}),r&&(0,i.az)("div",{class:"last-question-card",children:(0,i.az)(h.Question,{data:n,disableInput:!0})}),(0,i.az)(w,{propUpdater:s,onSubmit:a,questionData:n})]})}}function U(e,t){return 1===t?e:e+"s"}class I extends i.wA{constructor(...e){super(...e),S(this,"state",{currentTask:null}),S(this,"closeWorkspaceTask",()=>this.setState({currentTask:null})),S(this,"setTask_addQuestion",()=>this.setState({currentTask:D})),S(this,"setTask_editQuestion",()=>this.setState({currentTask:q}))}render(e,t){if(null==t.currentTask)return(0,i.az)("div",{children:[(0,i.az)("span",{children:"Available Actions:"}),(0,i.az)("button",{class:"btn-act hoverable",onClick:this.setTask_addQuestion,children:"Add Question"}),(0,i.az)("button",{class:"btn-act hoverable",onClick:this.setTask_editQuestion,children:"Edit Question"})]});const s=this.state.currentTask;return(0,i.az)(s,{close:this.closeWorkspaceTask})}}var T=s(326),E=s(659),L=s(264);function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const C=a.h.getStore();class H extends T.Profile{constructor(...e){super(...e),x(this,"helpText","Click on a property to edit"),x(this,"editableFieldsValidatorFunctions",{name:L.u2,ig_user_id:L.oS,email:L.sQ,school:L.oS,current_level:L.If,last_question_answered_at:L.If}),x(this,"_promiseErrorHandler",()=>this.setState({error:"Unknown error occured",isEditing:!0})),x(this,"__confirmAction",e=>{const t=e.target.dataset.action;this.setState({confirmAction:t,isConfirmed:!1})}),x(this,"__executeConfirmedAction",()=>{const e=this.state.confirmAction;if(this.setState({isConfirmed:!0,workProgress:"Making irreversible changes to the database...."}),"delete"===e)return(0,r.V)(n.SA.deleteUser,{user:this.state.__receivedData.id,field:this.state.fieldEdited}).then(e=>{const t=e.error||e.data.error;if(t)return this.setState({error:t,workProgress:null,confirmAction:null});this.props.closeProfileEditor(this.state.__receivedData)}).catch(this._promiseErrorHandler);if("qualification-toggle"==e){const e=this.state.__receivedData.is_disqualified?"requalify":"disqualify",t=n.SA[e];return(0,r.V)(t,{user:this.state.__receivedData.id}).then(this.__cxResponses).catch(this._promiseErrorHandler)}}),x(this,"__cxResponses",e=>{this.setState({confirmAction:null}),this.__onResponse(e)}),x(this,"syncProfileInfoWithServer",e=>{const t=this.state.fieldEdited;"last_question_answered_at"!==t&&"current_level"!==t||(e=e.length>1?e.replace(/^0+/,""):e);const s=this.editableFieldsValidatorFunctions[t](e);if(!s.valid)return this.setState({error:s.error,workProgress:null,isEditing:!0});this.setState({workProgress:"Syncing new data with the server..."}),(0,r.V)(n.SA.adminEditUserData,{user:this.state.__receivedData.id,field:t,new_value:(e||"").trim()}).then(this.__onResponse).catch(this._promiseErrorHandler)}),x(this,"__closeAction",()=>this.setState({confirmAction:null,isConfirmed:null}))}_getKeys(e){return["id","has_verified_email"].concat((0,E.Z)(this.editableFieldsValidatorFunctions))}_isAllowedToEditProfile(){return!0}_getActionPanel(){if(!C.isLoggedIn)return;const e=this.state.__receivedData;return e&&e.id!==C.userData.id?(0,i.az)("div",{children:[(0,i.az)("div",{class:"heading-text clr",style:{fontSize:"2rem"},children:"DANGER SECTION"}),(0,i.az)("button",{"data-action":"delete",class:"hoverable action-button act",onClick:this.__confirmAction,children:"Delete Account"}),(0,i.az)("button",{"data-action":"qualification-toggle",class:"hoverable action-button act",onClick:this.__confirmAction,children:[e.is_disqualified?"Requalify":"Disqualify"," Account"]})]}):void 0}render(e,t){const s=t.confirmAction;if(!s)return super.render(e,t);{const e=t.__receivedData,a=e.is_disqualified,n=e.id,r=e.name;if(!t.isConfirmed)return(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"mask",onClick:this.__closeAction}),(0,i.az)(u.GI,{close:this.__executeConfirmedAction,title:"Woah there..",errorHead:(0,i.az)("span",{children:["Are you sure you want to",(0,i.az)("span",{style:{color:"red"},children:" "+("delete"===s?s:a?"Requalify":"Disqualify").toUpperCase()}),` ${n}( ${r} ) ?`]})}),";"]});if(t.workProgress)return(0,i.az)("div",{children:t.workProgress})}}}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class N extends i.wA{constructor(...e){super(...e),F(this,"state",{isFetching:!1,fetchedUsers:null,filteredUsers:null,query:""}),F(this,"execSearchQueryAsynchronously",e=>{const t=e.target.value||"",s=A(t);return this.state.fetchedUsers&&this.state.fetchedUsers.length?t?void(0,y.u)(()=>{const e=this.state.fetchedUsers.filter(e=>{const t=e.name,i=e.id;return k(t,s)||k(i,s)});this.setState({error:!1,filteredUsers:e})}):this.setState({filteredUsers:this.state.fetchedUsers}):this.setState({filteredUsers:[]})}),F(this,"setUserEditingCandidate",e=>{const t=+e.target.dataset.eindex;this.setState({isEditingUserDetails:!0,currentUserDetails:this.state.filteredUsers[t],currentEditIndex:t})}),F(this,"_closeEditor",e=>{let t=this.state.fetchedUsers;e&&(t=(this.state.fetchedUsers||[]).filter(t=>t!==e)),this.setState({isEditingUserDetails:!1,fetchedUsers:t,filteredUsers:t})})}fetchUsers(){this.state.isFetching||(this.setState({isFetching:!0}),(0,r.A)(n.SA.getAllUsers).then(e=>{const t=e.error||e.data.error;if(t)return this.setState({error:t});const s=e.data;this.setState({isFetching:!1,error:!1,fetchedUsers:s,filteredUsers:s})}))}componentDidMount(){this.fetchUsers()}render(e,t){if(t.isFetching)return"fetching all user data...";if(t.error)return(0,i.az)("div",{children:["An error occured: ",(0,i.az)("div",{children:t.error})]});if(t.isEditingUserDetails)return(0,i.az)(i.HY,{children:[(0,i.az)("button",{class:"hoverable action-button act",onClick:this._closeEditor,children:"Go Back to Users List"}),(0,i.az)(H,{closeProfileEditor:this._closeEditor,data:t.currentUserDetails,propUpdateCallback:this._syncProps})]});const s=this.state.filteredUsers&&this.state.filteredUsers.length;return(0,i.az)("div",{children:[(0,i.az)("div",{style:{fontSize:"0.96rem"},children:"Click a user to edit"}),(0,i.az)("div",{class:"input-parent",children:(0,i.az)("input",{placeholder:"Search by username or name",class:"paper-input",onInput:this.execSearchQueryAsynchronously})}),t.filteredUsers&&(0,i.az)(i.HY,{children:[(0,i.az)("div",{style:{fontSize:"2rem"},children:["Results: ",s," ",U("User",s)]}),(0,i.az)("div",{class:"search-results heading-text",children:t.filteredUsers.map((e,t)=>(0,i.az)("div",{"data-eindex":t,class:"search-result-element hoverable",onClick:this.setUserEditingCandidate,children:[e.id," ( ",e.name," )"]}))})]})]})}}function V(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{default:()=>j});const M=a.h.getStore();function j(){return M.isLoggedIn&&M.userData.is_admin?(0,i.az)("div",{class:"admin-data-panel",children:(0,i.az)(R,{})}):(0,i.az)("div",{style:{fontSize:"8rem"},children:"NO"})}class R extends i.wA{constructor(...e){super(...e),V(this,"state",{currentTab:"questions"}),V(this,"setTab",e=>this.setState({currentTab:e?e.target.dataset.tab:null}))}render(e,t){const s="questions"===t.currentTab,a="users"===t.currentTab;t.currentTab;return(0,i.az)(i.HY,{children:[(0,i.az)("div",{class:"btn-box",children:["questions","users","logs"].map(e=>t.currentTab!==e&&(0,i.az)("button",{onClick:this.setTab,"data-tab":e,class:"admin-button-tab",children:e}))}),(0,i.az)("div",{style:{fontSize:"2rem"},children:["Workspace: ",t.currentTab||"Not selected"]}),this.state.currentTab&&(0,i.az)("div",{style:{textAlign:"left"},children:(0,i.az)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNi4wMSAxMUg0djJoMTIuMDF2M0wyMCAxMmwtMy45OS00eiIvPjwvc3ZnPg==",class:"back hoverable",title:"go back",onClick:()=>this.setTab()})}),s&&(0,i.az)(I,{}),a&&(0,i.az)(N,{})]})}}},67:(e,t,s)=>{"use strict";s.d(t,{OK:()=>a,Pt:()=>n,GI:()=>r});var i=s(386);function a(e){return(0,i.az)(r,{...Object.assign({},e,{title:"Something Ain't Right"})})}const n=/([^\w]|_)/g;function r(e){return(0,i.az)("div",{class:"app-popup",children:[(0,i.az)("div",{class:"heading-text clr app-popup-title",children:e.title}),(0,i.az)("div",{children:e.errorHead}),(0,i.az)("div",{class:"err-reasons",children:(0,i.az)("div",{children:(e.reasons||[]).map(e=>(0,i.az)("div",{children:[" - ",e]}))})}),(0,i.az)("button",{class:"app-popup-close",onClick:e.close,children:"OK"})]})}},264:(e,t,s)=>{"use strict";s.d(t,{Vy:()=>a,sQ:()=>r,oS:()=>o,If:()=>l,Bj:()=>d,RX:()=>c,u2:()=>u,R0:()=>h});var i=s(67);const a={valid:!0},n={valid:!1};function r(e){return e?a:{error:"Value required"}}const o=()=>a;function l(e){return(t=+(t=e))==t?a:n;var t}function d(e){return e.length<5?{error:h.pwLength}:a}function c(e){const t=e.length;return t<3||t>30?{error:h.userLength}:e!==e.replace(i.Pt,"")?{error:h.invalidCharacters}:a}function u(e){const t=e.length;return!t||t>30?{error:h.nameLength}:a}const h={userLength:"Username should be between 3 and 30 characters",invalidCharacters:"Username and name can not contain special characters",invalidEmail:"Invalid email",nameLength:"Name should be less than 30 characters and cannot be blank",pwLength:"Password should be longer than 5 characters",pwNomatch:"Passwords do not match"}}}]);