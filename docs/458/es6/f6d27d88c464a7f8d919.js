(window.webpackJsonp=window.webpackJsonp||[]).push([[458,564],{7:(t,e,s)=>{"use strict";s.d(e,{k:()=>l});var n=s(77),i=s(596),a=s(804),o=s(369);const r=(0,o.Z)({session:function(){if("crypto"in self)return crypto.getRandomValues(new Uint8Array(10)).join("-");return String(Math.random())}()},window.__initConfig);window.__initConfig=null;const u=a.h.getStore(),c=window.requestIdleCallback||window.requestAnimationFrame||window.Promise&&Promise.prototype.then.bind(Promise.resolve())||setTimeout;const l=new class{constructor(){this.pageViewRegistered="register-start",this.registerActionComplete="register-end",this.pageViewLogin="login-start",this.loginActionCompleted="login-end",this.pageViewPlay="play-start",this.accessQuestion="question",this.answeredQuestion="answered",this.leaderboardView="leaderboard",this.profileView="profile"}__shouldPostLog(){return!n.mH}_admin_getLogs(){if(u.isLoggedIn&&u.userData.is_admin)return(0,i.A)(n.PW.getLogs)}sendUserLog(t){const e="string"==typeof t?{type:t}:t,s=(0,o.Z)({},e,r);this.__shouldPostLog()?c(()=>(0,i.V)(n.PW.addLog,s)):console.log("prod log post ->",s)}};window.onerror=(t,e,s,n,i)=>{const a=i||{};t=t||a.message||"";const o=i.line||a.message||0,r=i.column||0,u=a.script||"",c=a.stackTrace||a.stack||"",d=Date.now(),h=location.href;l.sendUserLog({type:"js-error",timestamp:d,message:t,line:o,column:r,script:u,stack:c,url:h,source:e})}},564:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>p,Question:()=>v});var n=s(386),i=s(804),a=s(77),o=s(596),r=(s(710),s(67)),u=s(7);function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const l=i.h.getStore(),d=t=>(t||"").toLowerCase().replace(/\s/g,""),h=(0,n.az)(v,{data:{question_level:"Loading",question:"Finding your question",hint:[]}});class p extends n.wA{constructor(...t){var e;super(...t),e=this,c(this,"state",{fetchedQuestion:null,isFetching:!1,answer:"",isAwaitingAnswer:!1,incorrect:!1}),c(this,"onInput",t=>this.setState({answer:d(t.target.value)})),c(this,"_submit",(async function(){if(e.state.isAwaitingAnswer)return;e.setState({isAwaitingAnswer:!0});const t=e.state.answer,s=e.state.fetchedQuestion&&e.state.fetchedQuestion.question_level||1;if(!t)return;const n={answer:t},i=(await(0,o.V)(a.hY.answerQuestion,n)).data;if(u.k.sendUserLog({type:u.k.answeredQuestion,question_level:s}),i.result)return e.proceedToNextLevel();e.setState({isAwaitingAnswer:!1,incorrect:!0})})),c(this,"proceedToNextLevel",()=>{u.k.sendUserLog({type:u.k.accessQuestion,question_level:(this.state.fetchedQuestion&&this.state.fetchedQuestion.question_level||0)+1}),this.setState({fetchedQuestion:null})}),c(this,"resetError",()=>this.setState({incorrect:!1}))}componentDidMount(){if(!l.isLoggedIn)return(0,n.uX)("/login?next=/play");u.k.sendUserLog(u.k.pageViewPlay),this.fetchQuestion()}componentDidUpdate(){if(null==this.state.fetchedQuestion)return this.fetchQuestion()}async fetchQuestion(){if(this.state.isFetching)return;this.setState({isFetching:!0});const t=await(0,o.A)(a.hY.getQuestion);if(t.error)return this.setState({hasError:!0,isFetching:!1,fetchedQuestion:1});const e=t.data;this.setState({fetchedQuestion:e,isFetching:!1})}render(t,e){return l.eventBegan?(0,n.az)(n.HY,{children:[e.incorrect&&(0,n.az)(n.HY,{children:[(0,n.az)("div",{class:"mask"}),(0,n.az)(r.O,{errorHead:"Nope",reasons:["That is not the right answer"],close:this.resetError})]}),e.isFetching||!e.fetchedQuestion?h:(0,n.az)(v,{data:e.fetchedQuestion,value:e.answer,onInput:this.onInput,onSubmit:this._submit}),e.isAwaitingAnswer&&"Checking your answer..."]}):(0,n.az)("div",{style:{fontSize:"4rem"},children:"Not yet"})}}const g={autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:!1,style:{width:"90%"}};function v(t){const{data:e,value:s,onInput:i,onSubmit:a,disableInput:o}=t;return e.game_over?"You win (?)":(0,n.az)("form",{action:"javascript:",onSubmit:a,children:[(0,n.az)("div",{class:"question-num",children:["Question - ",e.question_level]}),(0,n.az)("div",{class:"question-card",children:[(0,n.az)("div",{children:e.question}),(0,n.az)("div",{class:"question-hint",children:e.hint&&!!e.hint.length&&e.hint.map((t,e)=>(0,n.az)("div",{children:`Hint ${e+1}: ${t}`}))}),!o&&(0,n.az)("input",{...Object.assign({class:"paper-input",placeholder:"Answer",onInput:i,value:s},g)})]}),!o&&(0,n.az)("button",{class:"action-button heading-text sbm-button hoverable",children:"Submit"})]})}},458:(t,e,s)=>{"use strict";s.r(e);var n=s(386),a=s(804),o=s(77),r=s(596);var u=s(564);function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class l extends n.wA{constructor(...t){super(...t),c(this,"state",{hasQuestionData:null,question:"",hint:[],special:[],answer:"",hintLen:0,specialLen:0}),c(this,"_handleQuestion",t=>{const e=t.target.value||"";this.setState({question:e}),this.props.propUpdater("question",e)}),c(this,"componentDidUpdate",this.componentDidMount),c(this,"_handleHint",t=>{const e=+t.target.dataset.value;this.state.hint[e]=ee.target.value})}componentDidMount(){this.state.hasQuestionData&&this.state.question_level===this.props.questionData.question_level||(this.props.questionData=[],this.setState({hasQuestionData:!0,...this.props.questionData}))}render(t,e){if(e.hasQuestionData)return(0,n.az)("div",{children:[(0,n.az)("div",{style:{width:"80%",margin:"auto",marginBottom:"20px"},children:(0,n.az)("input",{class:"paper-input",value:e.question,placeholder:"Question",onInput:this._handleQuestion})}),(0,n.az)("div",{children:e.hint&&e.hint.length>0?e.hint.map((t,e)=>(0,n.az)("input",{"data-value":e,class:"paper-input",value:t,placeholder:"Hint #"+e,onInput:this._handleHint})):(0,n.az)("input",{"data-value":i,class:"paper-input",value:x,placeholder:"Hint #"+i})})]})}}function d(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,{default:()=>p});const h=a.h.getStore();function p(){return h.isLoggedIn&&h.userData.is_admin?(0,n.az)("div",{class:"admin-data-panel",children:(0,n.az)(g,{})}):(0,n.az)("div",{style:{fontSize:"8rem"},children:"NO"})}class g extends n.wA{constructor(...t){super(...t),d(this,"state",{currentTab:"questions"}),d(this,"setTab",t=>this.setState({currentTab:t.target.dataset.tab}))}render(t,e){const s="questions"===e.currentTab,i="users"===e.currentTab,a="logs"===e.currentTab;return(0,n.az)(n.HY,{children:[(0,n.az)("div",{class:"btn-box",children:[(0,n.az)("button",{onClick:this.setTab,"data-tab":"questions",class:"admin-button-tab"+(s?" active":""),children:"Questions"}),(0,n.az)("button",{onClick:this.setTab,"data-tab":"users",class:"admin-button-tab"+(i?" active":""),children:"Users"}),(0,n.az)("button",{onClick:this.setTab,"data-tab":"logs",class:"admin-button-tab"+(a?" active":""),children:"Logs"})]}),(0,n.az)("div",{style:{fontSize:"2rem"},children:["Workspace: ",e.currentTab]}),s&&(0,n.az)(v,{}),i&&(0,n.az)(m,{})]})}}class v extends n.wA{constructor(...t){super(...t),d(this,"state",{currentTask:null}),d(this,"closeWorkspaceTask",()=>this.setState({currentTask:null})),d(this,"setTask_addQuestion",()=>this.setState({currentTask:w})),d(this,"setTask_editQuestion",()=>this.setState({currentTask:b}))}render(t,e){if(null==e.currentTask)return(0,n.az)("div",{children:[(0,n.az)("span",{children:"Available Actions:"}),(0,n.az)("button",{class:"btn-act hoverable",onClick:this.setTask_addQuestion,children:"Add Question"}),(0,n.az)("button",{class:"btn-act hoverable",onClick:this.setTask_editQuestion,children:"Edit Question"})]});const s=this.state.currentTask;return(0,n.az)(s,{})}}class w extends n.wA{constructor(...t){super(...t),d(this,"state",{questionData:{question:"",hint:[],special_hint:[]}}),d(this,"_sendQuestion",()=>{}),d(this,"_propUpdater",(t,e)=>this.setState(s=>{const n=s.questionData;return n[t]=e,n}))}async getLastQuestionData(){this.setState({isLoading:!0,data:null,showLastQuestion:!1});const t=await(0,r.A)(o.SA.getLatestQuestionNumber).then(t=>t.data),e=this.state.questionData;e.question_level=t.question_number+1,this.setState({data:!0,isLoading:!1,questionData:e})}componentDidMount(){this.getLastQuestionData()}render(t,e){return this.state.isLoading?(0,n.az)(f,{}):this.state.data?(0,n.az)("div",{children:[(0,n.az)("div",{class:"heading-text last-q",children:"Game View :"}),(0,n.az)(l,{propUpdater:this._propUpdater,onSubmit:this._sendQuestion,questionData:this.state.questionData}),(0,n.az)("div",{class:"last-question-card",children:(0,n.az)(u.Question,{data:e.questionData,disableInput:!0})})]}):void 0}}class b extends n.wA{}function m(){}const f=()=>"Loading data..."},710:(t,e,s)=>{"use strict";s.d(e,{H:()=>a});var n=s(386);function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class a extends n.wA{constructor(...t){super(...t),i(this,"state",{id:Math.random(),isFocused:!1,value:this.props.value||""}),i(this,"onFocus",()=>!this.state.value&&this.setState({isFocused:!0,moveDown:!1})),i(this,"onBlur",()=>!this.state.value&&this.setState({isFocused:!1,moveDown:!0})),i(this,"onInput",t=>this.setState({value:t.target.value})),i(this,"__onInput",t=>{const e=this.props.onInput;this.onInput(t),null!=e&&e(t)})}render({idx:t,labelText:e="",type:s="text",inputClass:i,extraProps:a},{isFocused:r,moveDown:u}){const c=t||this.state.id,l=this.state.value,d=["_animate",r||l?"moveup":"",u?"movedown":""];return(0,n.h)("div",{class:"user-input-anim "+(i||"")},(0,n.h)("label",{class:d,for:c},e),(0,n.h)(o,{onFocus:this.onFocus,onBlur:this.onBlur,type:s,value:l,extraProps:a,id:c,onInput:this.__onInput}))}}function o({onFocus:t,onBlur:e,onInput:s,id:i,type:a,value:o,extraProps:r}){return(0,n.h)("input",{onFocus:t,onBlur:e,onInput:s,id:i,value:o,type:a,...r,class:"paper-input"})}},67:(t,e,s)=>{"use strict";s.d(e,{O:()=>i,P:()=>a});var n=s(386);function i(t){return(0,n.az)("div",{class:"app-popup",children:[(0,n.az)("div",{class:"heading-text clr app-popup-title",children:"Something Ain't Right"}),(0,n.az)("div",{children:t.errorHead}),(0,n.az)("div",{class:"err-reasons",children:(0,n.az)("div",{children:t.reasons.map(t=>(0,n.az)("div",{children:[" - ",t]}))})}),(0,n.az)("button",{class:"app-popup-close",onClick:t.close,children:"OK"})]})}const a=/([^\w]|_)/g}}]);